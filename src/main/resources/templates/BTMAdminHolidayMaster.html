<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css"
	href="/webjars/bootstrap/4.3.1/css/bootstrap.min.css"
	th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.min.css}">
<link rel="stylesheet" type="text/css"
	href="/webjars/font-awesome/5.9.0/css/all.min.css"
	th:href="@{/webjars/font-awesome/5.9.0/css/all.min.css}">
<link rel="stylesheet" type="text/css"
	href="/webjars/jquery-ui/1.12.1/jquery-ui.min.css"
	th:href="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.css}">
<link rel="stylesheet" type="text/css"
	href="/webjars/datatables/1.10.19/css/jquery.dataTables.min.css"
	th:href="@{/webjars/datatables/1.10.19/css/jquery.dataTables.min.css}">
<link rel="shortcut icon" th:href="@{/favicon.ico}" type="image/x-icon">
<link rel="icon" th:href="@{/favicon.ico}" type="image/x-icon">

<script src="/webjars/bootstrap/4.3.1/js/bootstrap.min.js"
	th:src="@{/webjars/bootstrap/4.3.1/js/bootstrap.min.js}"></script>
<script src="/webjars/popper.js/1.14.7/umd/popper.min.js"
	th:src="@{/webjars/popper.js/1.14.7/umd/popper.min.js}"></script>
<script src="/webjars/jquery/3.4.1/jquery.min.js"
	th:src="@{/webjars/jquery/3.4.1/jquery.min.js}"></script>
<script src="/webjars/jquery-ui/1.12.1/jquery-ui.min.js"
	th:src="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.js}"></script>
<script src="/webjars/jquery-form/4.2.2/jquery.form.min.js"
	th:src="@{/webjars/jquery-form/4.2.2/jquery.form.min.js}"></script>
<script src="/webjars/jquery-validation/1.19.0/jquery.validate.min.js"
	th:src="@{/webjars/jquery-validation/1.19.0/jquery.validate.min.js}"></script>
<script src="/webjars/datatables/1.10.19/js/jquery.dataTables.min.js"
	th:src="@{/webjars/datatables/1.10.19/js/jquery.dataTables.min.js}"></script>
<script
	src="/webjars/datatables/1.10.19/js/dataTables.bootstrap4.min.js"
	th:src="@{/webjars/datatables/1.10.19/js/dataTables.bootstrap4.min.js}"></script>



<style>
.btns {
	float: right;
	margin: 5px;
}

label {
	font-size: 16px;
}

.col-sm-5 {
	padding-bottom: 15px;
}

.list-body {
	padding: 0px;
}

.error {
	color: red;
	padding-left: 10px;
}

.formline {
	padding-bottom: 4px;
}

#finusertb {
	width: 460px;
}

.dataTables_wrapper .dataTables_paginate .paginate_button {
	padding: 0px;
}

.nav-tabs .nav-item.show .nav-link, .nav-tabs .nav-link.active {
	border: 2px solid skyblue !important;
	border-bottom: unset !important;
	background-color: unset !important;
	color: black !important;
	background-color: unset !important;
}

nav {
	border-bottom: 2px solid grey;
}

.filterable .filters input[disabled] {
	background-color: transparent;
	border: none;
	cursor: auto;
	box-shadow: none;
	padding: 0;
	height: auto;
}

.filterable .filters input[disabled]::-webkit-input-placeholder {
	color: #333;
}

.filterable .filters input[disabled]::-moz-placeholder {
	color: #333;
}

.filterable .filters input[disabled]:-ms-input-placeholder {
	color: #333;
}

input:focus, textarea:focus {
	background-color: red;
	color: red;
}
</style>

<style type="text/css">
.navbar {
	margin-left: -5px;
	position: fixed; /* Keep it fixed */
	top: 0;
	width: 100%;
	z-index: 1000; /* Ensure it's above other elements */
}

.content {
	margin-top: 151px ! important; /* Push content down to avoid overlap */
}

.container-fluid {
	width: 100%;
	padding-right: 0px;
	padding-left: 15px;
	margin-right: auto;
	margin-left: auto;
}

.container-manager {
	padding-right: 47px;
	padding-left: 132px;
}

.row {
	display: -ms-flexbox;
	display: flex;
	-ms-flex-wrap: wrap;
	flex-wrap: wrap;
	margin-right: -8px;
	margin-left: -22px;
}
</style>
<script type="text/javascript">
$(document).ready(function () {
    $('.dropdown, .dropdown-submenu').hover(function () {
        $(this).children('.dropdown-menu').stop(true, true).delay(200).fadeIn(200);
    }, function () {
        $(this).children('.dropdown-menu').stop(true, true).delay(200).fadeOut(200);
    });
});
</script>




<script th:inline="javascript">
	/*<![CDATA[*/

	$(function() {

		$("#date").datepicker({
			changeMonth : true,
			changeYear : true,
			dateFormat : "dd-mm-yy"
		});

	});

	function home() {
		event.preventDefault();
		location.href = 'Dashboard';
	}

	function back() {
		event.preventDefault();
		window.history.back();
	}
	
	function adduser() {
		location.href = 'adminHolidayMaster?formmode=add';
	}

	function userList() {
		location.href = 'adminHolidayMaster?formmode=list';
	}
	
	function modifyData() {
		location.href = 'adminHolidayMaster?formmode=list1';
	}
	
	
	function modifyPage(element) {
	    var resId = $(element).attr("data-id"); // Get record ID correctly
	    var formMode = "edit";
	    
	    location.href = 'adminHolidayMaster?formmode=' + formMode + '&resId=' + resId;
	}

	function viewDetail(element) {
	    var resId = $(element).attr("data-id"); // Get record ID correctly
	    var formMode = "view1";
	    
	    location.href = 'adminHolidayMaster?formmode=' + formMode + '&resId=' + resId;
	}

	function addUserData() {
		
		if ($("#AdminAssociateProfile").valid()) {

			var url = "./adminHolidayMasterAdd?formmode=add";
			$("#AdminAssociateProfile").attr('action', url);

			var options = {
				success : showResponse
			};

			$("#AdminAssociateProfile").ajaxSubmit(options);

			function showResponse(responseText, statusText, xhr, $form) {

				$("#alertmsg").text(responseText);
				$("#alert").modal("toggle");
			}
			;
		}
	};

	function modifyuserData() {
		
		if ($("#AdminAssociateProfile").valid()) {

			var recordNo = $("#recordNo").val();

			var url = "./adminHolidayMasterAdd?formmode=edit&recordNo"
					+ recordNo;

			$("#AdminAssociateProfile").attr('action', url);

			var options = {
				success : showResponse
			};

			$("#AdminAssociateProfile").ajaxSubmit(options);

			function showResponse(responseText, statusText, xhr, $form) {
				$("#alertmsg").text(responseText);
				$('#alert').modal("toggle");
			}
			;
		}
	};
	
	
	$(document).ready(function() {
	    // When clicking the radio button, show the dropdown and uncheck others
	    $(".checkToOpenDropdown").on("click", function(event) {
	        event.stopPropagation(); // Prevents dropdown from closing immediately

	        // Uncheck all radio buttons except the one clicked
	        $(".checkToOpenDropdown").prop("checked", false);
	        $(this).prop("checked", true);

	        // Hide all dropdowns and show only the clicked one
	        $(".dropdown-menu").hide();
	        $(this).siblings(".dropdown-menu").toggle();
	    });

	    // Click outside to close dropdown
	    $(document).on("click", function(event) {
	        if (!$(event.target).closest(".dropdown").length) {
	            $(".dropdown-menu").hide(); // Close dropdown if clicked outside
	            $(".checkToOpenDropdown").prop("checked", false); // Unselect all radios
	        }
	    });

	    // Check To Modify (Only when clicking Modify)
	    $(".checkToModify").on("click", function() {
	    	
	    
	        var resId = $(this).attr("data-id");
	        var formMode = "edit";
	        location.href = 'adminHolidayMaster?formmode=' + formMode + '&resId=' + resId;
	    });

	    // Check To View (Only when clicking View)
	    $(".checkToView").on("click", function() {
	        var resId = $(this).attr("data-id");
	        var formMode = "view1";
	        location.href = 'adminHolidayMaster?formmode=' + formMode + '&resId=' + resId;
	    });
	});
	
	
	

	
	//Filter Table
	$(document)
			.ready(
					function() {
						$('.filterable .btn-filter')
								.click(
										function(event) {
											event.preventDefault();
											var $panel = $(this).parents(
													'.filterable'), $filters = $panel
													.find('.filters input'), $tbody = $panel
													.find('.table tbody');
											if ($filters.prop('disabled') == true) {
												$filters
														.prop('disabled', false);
												$filters.first().focus();
											} else {
												$filters.val('').prop(
														'disabled', true);
												$tbody.find('.no-result')
														.remove();
												$tbody.find('tr').show();
											}
										});

						$('.filterable .filters input')
								.keyup(
										function(e) {
											/* Ignore tab key */
											var code = e.keyCode || e.which;
											if (code == '9')
												return;
											/* Useful DOM data and selectors */
											var $input = $(this), inputContent = $input
													.val().toLowerCase(), $panel = $input
													.parents('.filterable'), column = $panel
													.find('.filters th')
													.index($input.parents('th')), $table = $panel
													.find('.table'), $rows = $table
													.find('tbody tr');
											/* Dirtiest filter function ever ;) */
											var $filteredRows = $rows
													.filter(function() {
														var value = $(this)
																.find('td').eq(
																		column)
																.text()
																.toLowerCase();
														return value
																.indexOf(inputContent) === -1;
													});
											/* Clean previous no-result if exist */
											$table.find('tbody .no-result')
													.remove();
											/* Show all rows, hide filtered ones (never do that outside of a demo ! xD) */
											$rows.show();
											$filteredRows.hide();
											/* Prepend no-result row if all rows are filtered */
											if ($filteredRows.length === $rows.length) {
												$table
														.find('tbody')
														.prepend(
																$('<tr class="no-result text-center"><td colspan="'
																		+ $table
																				.find('.filters th').length
																		+ '">No result found</td></tr>'));
											}
										});
					});

	/*]]>*/
	
</script>
<script>
    function updateMonthAndYear() {
        var dateInput = document.getElementById("date").value;
        if (dateInput) {
            var parts = dateInput.split('-'); // Assuming format is DD-MM-YYYY
            if (parts.length === 3) {
                var day = parseInt(parts[0], 10);
                var month = parseInt(parts[1], 10) - 1; // Months in JS are 0-indexed
                var year = parseInt(parts[2], 10);

                var monthNames = ["January", "February", "March", "April", "May", "June", 
                                  "July", "August", "September", "October", "November", "December"];

                document.getElementById("month").value = monthNames[month]; // Correct month name
                document.getElementById("calendarYear").value = year; // Year
            }
        }
    }
</script>

<script>
		function capitalizeInput(input) {
			let value = input.value;
			// Only change the first letter to uppercase if it's lowercase
			value = value.replace(/\b[a-z]/g, function (char) {
				return char.toUpperCase();
			});
			input.value = value;
		}
	</script>



<script>
	
	


	function select_branch1() {
		

	    //const branchId = document.getElementById('branchId').value;
	    const org_id = document.getElementById('org_id').value;
	
	    
        const branchId = document.getElementById('branchId').value;
   
        if (!org_id || !branchId) {
            alert("Please select both Organization and Branch.");
            return;
        }
	    //const table1 = document.getElementById('table1');
	    //const table2 = document.getElementById('table2');
	  
	    
	    
	    
	    

	    $.ajax({
	        url: './getuserbranchlistFORHOLI?branchId=' + branchId + '&org_id=' +org_id,
	        type: 'GET',
	        dataType: 'json',
	        success: function(response) {
	        	
	        
	        	
	            const tableBody = document.getElementById('hhkjhkjhkjhkjhk');
	            tableBody.innerHTML = ''; // Clear existing data

	            if (response.length === 0) {
	                tableBody.innerHTML = `<tr><td colspan="7" style="text-align: center; color: red;">No records found.</td></tr>`;
	            } else {
	                response.forEach((userlist, index) => {
	    

	                    let row = `<tr>
	                        <td style="width: 130px;">${index + 1}</td>
	                        <td>${userlist.cal_month || ''}</td>
	                        <td style="width: 180px;">${userlist.cal_year || ''}</td>
	                        <td>${userlist.record_date ? formatDate(userlist.record_date) : ''}</td>
	                        <td>${userlist.record_date ? formatDay(userlist.record_date) : ''}</td>
	                        <td style="width: 300px;">${userlist.holiday_desc || ''}</td>
	                        <td>
	                            <div class="dropdown" style="margin-right: 30%;">
	                                <input type="radio" class="checkToOpenDropdown" value="${userlist.record_srl}" style="margin: 0 5px;">
	                                <div class="dropdown-menu" id="dropdown-${userlist.record_srl}" style="width: 30px; transform: translateX(-115px); display: none;">
	                                    <a class="dropdown-item checkToModify" onclick="modifymy(this);" href="#" data-id="${userlist.record_srl}">Modify</a>
	                                    <a class="dropdown-item checkToView" onclick="viewmy(this);" href="#" data-id="${userlist.record_srl}">View</a>
	                                </div>
	                            </div>
	                        </td>
	                    </tr>`;

	                    tableBody.insertAdjacentHTML('beforeend', row);
	                });

	                // Add event listeners for dropdown toggle
	                document.querySelectorAll('.checkToOpenDropdown').forEach(radio => {
	                    radio.addEventListener('change', function() {
	                        const dropdown = document.getElementById(`dropdown-${this.value}`);
	                        document.querySelectorAll('.dropdown-menu').forEach(menu => menu.style.display = 'none');
	                        if (this.checked) dropdown.style.display = 'block';
	                    });
	                });
	            }
	        },
	        error: function(xhr, status, error) {
	            alert("Error: " + error);
	        }
	    });
	}

	// Helper function to format date as dd-MM-yyyy
	function formatDate(dateString) {
	    let date = new Date(dateString);
	    return date.toLocaleDateString('en-GB');
	}

	// Helper function to get day from date
	function formatDay(dateString) {
	    let date = new Date(dateString);
	    return date.getDate();
	}



	</script>

<script>
	
	function modifymy(a){
       var resId = a.getAttribute("data-id");
	     
	        var formMode = "edit";
	        location.href = 'adminHolidayMaster?formmode=' + formMode + '&resId=' + resId;
		
	}
	
	function viewmy(a){
	       var resId = a.getAttribute("data-id");
	       
	       var formMode = "view1";
	        location.href = 'adminHolidayMaster?formmode=' + formMode + '&resId=' + resId;
		
		}
	
	</script>


<script>

let consolidate = [];


function select_org() {
    const org_id = document.getElementById('org_id').value;

    $.ajax({
        url: './getorglistnew?org_id=' + org_id,
        type: 'GET',
        dataType: 'json',
        success: function(response) {
        	
        	
        	 consolidate = []; // Reset
        	
            const branchSelect = document.getElementById('branchId');
            branchSelect.innerHTML = '<option value="">Select Branch</option>';
              response.forEach(function(row) {
            	  
                  let branchId = row[0];
                  let branchName = row[1];
                  let orgName = row[2];
                  
                  // Store into consolidate
                  consolidate.push({ branchId: branchId, branchName: branchName, orgName: orgName });

            	 const option = document.createElement('option');
                option.value = branchId;
                option.text = branchId;
                branchSelect.appendChild(option);
            });
        },

        error: function(xhr, status, error) {
            alert("Error: " + error);
        }
    });
}


</script>

<script>
function select_branch() {
    var selectedBranchId = document.getElementById('branchId').value;

    // Find matching branch object from consolidate
    let selectedBranch = consolidate.find(b => b.branchId === selectedBranchId);

    if (selectedBranch) {
        document.getElementById('organization').value = selectedBranch.orgName;
    }
}


</script>


</head>
<title>ERP</title>

<body>

	<div class="container-fluid">
		<div class="row">
			<div class="col-sm-2">
				<div th:insert="BTMHeaderMenu :: header"></div>
			</div>
			<div class="col-sm-12">

				<div class="container-fluid content"
					th:if="${formmode}=='add' OR  ${formmode}=='edit' OR ${formmode}=='view1'">
					<div class="row">
						<div class="col-sm-12">

							<form action="#" th:object="${adminHolidayProfile}" class="w-100"
								method="post" autocomplete="off" id="AdminAssociateProfile"
								name="form1">

								<div class="card">
									<div class="card-header border-bottom-0"
										style="font-family: 'Nunito', sans-serif; font-size: 23px; font-weight: 600; letter-spacing: 0.5px; line-height: 1.5; text-transform: capitalize; color: #333; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);">
										<div class="">
											<h3 th:if="${formmode}=='view' OR ${formmode}=='view1'">HOLIDAY
												MASTER - VIEW</h3>
											<h3 th:if="${formmode}=='add'">HOLIDAY MASTER - ADD</h3>
											<h3 th:if="${formmode}=='edit'">HOLIDAY MASTER - EDIT</h3>

										</div>
									</div>
									<div class="card-body p-3">

										<div class="form-group mb-0">

											<div class="row formline">
											
											<div class="col-4 col-lg-2">
													<label for="branchid">Organization Id</label>
												</div>
												
												<div class="col-sm-2">
												
												<select  class="form-control form-control-sm"
												onchange="select_org();" 	th:if="${formmode}=='add'"
											
												id="org_id" name="org_id">
												<option value="">Select Organization</option>
												<!-- Populate options dynamically using Thymeleaf -->
												<option th:each="OrgId : ${OrgIds}" th:value="${OrgId}"
													th:text="${OrgId}"></option>
											</select>
											
												<select  class="form-control form-control-sm"
												onchange="select_org();" 	th:if="${formmode}=='edit'"
											
												id="org_id" name="org_id">
												<option th:text="${adminHolidayProfile?.org_id}"
												th:value="${adminHolidayProfile?.org_id}">Select Organization</option>
												<!-- Populate options dynamically using Thymeleaf -->
												<option th:each="OrgId : ${OrgIds}" 
												
												th:if="${ OrgId != adminHolidayProfile?.org_id}"
												
												th:value="${OrgId}"
													th:text="${OrgId}"></option>
											</select>
											
											
											
												<select  class="form-control form-control-sm"
												onchange="select_org();" 	th:if="${formmode}=='view1'" disabled
											
												id="org_id" name="org_id">
												<option th:text="${adminHolidayProfile?.org_id}">Select Organization</option>
												<!-- Populate options dynamically using Thymeleaf -->
												<option th:each="OrgId : ${OrgIds}" th:value="${OrgId}"
													th:text="${OrgId}"></option>
											</select>
											
											</div>
											
											
											<div class="col-sm-2"></div>
											
												<div class="col-4 col-lg-2">
													<label for="branchid">Branch Id</label>
												</div>
												<div class="col-4 col-lg-2">

													<!-- Branch Selection -->
													<select class="form-control form-control-sm"
														th:if="${formmode}=='add'" onchange="select_branch(this);"
														id="branchId" name="branchId">
														<option value="">Select Branch</option>
														<!-- Populate options dynamically using Thymeleaf -->
														<option th:each="branchId : ${branchIds}"
															th:value="${branchId}" th:text="${branchId}"></option>
													</select>

													<!-- Branch Selection -->
													<select class="form-control form-control-sm"
														th:if="${formmode}=='view' OR ${formmode}=='view1'"
														onchange="select_branch();" id="branchId" name="branchId"
														disabled>
														<option th:text=${adminHolidayProfile?.branchId}></option>
														<!-- Populate options dynamically using Thymeleaf -->
														<option th:each="branchId : ${branchIds}"
															th:if="${ branchId !=adminHolidayProfile?.branchId}"
															th:value="${branchId}" th:text="${branchId}"></option>
													</select>

													<!-- Branch Selection -->
													<select class="form-control form-control-sm"
														th:if="${formmode}=='edit'" onchange="select_branch();"
														id="branchId" name="branchId">
														<option th:text=${adminHolidayProfile?.branchId}></option>
														<!-- Populate options dynamically using Thymeleaf -->
														<option th:each="branchId : ${branchIds}"
															th:if="${ branchId !=adminHolidayProfile?.branchId}"
															th:value="${branchId}" th:text="${branchId}"></option>
													</select>

												</div>
												<div class="col-4 col-lg-2"></div>

											</div>




											<div class="row formline">
												<div class="col-4 col-lg-2">
													<label for="organization">Organization</label>
												</div>
												<div class="col-4 col-lg-2">

													<input type="text" id="organization"
														
														th:if="${formmode}=='add'  OR ${formmode}=='view' OR ${formmode}=='view1'"
														class="form-control form-control-sm" name="orgn"
														autocomplete="off" readonly
														style="background-color: #f9fff6;" />
														
														
													<input type="text" id="organization"
														
														th:if="${formmode}=='edit'"
														th:value="${adminHolidayProfile?.orgn}"
														class="form-control form-control-sm" name="orgn"
														autocomplete="off" readonly
														style="background-color: #f9fff6;" />
														
														
													
														

												</div>
												<div class="col-4 col-lg-2"></div>
												<div class="col-4 col-lg-2">
													<label for="location">Location</label>
												</div>
												<div class="col-4 col-lg-2">

													<input type="text" id="location" name="location"
														value="Oddanchathiram"
														th:if="${formmode}=='edit' OR ${formmode}=='view' OR ${formmode}=='add' OR ${formmode}=='view1'"
														class="form-control form-control-sm" autocomplete="off"
														readonly style="background-color: #f9fff6;" />

												</div>
											</div>
										</div>
										<div class="form-group mb-0">
											<div class="row formline">
												<div class="col-4 col-lg-2">
													<label for="date">Date</label>
												</div>
												<div class="col-4 col-lg-2">
													<input type="text" id="date" th:if="${formmode}=='view'"
														class="form-control form-control-sm" autocomplete="off"
														readonly style="background-color: #f9fff6;" /> <input
														type="text" id="date" name="record_date"
														th:if="${formmode}=='add'"
														class="form-control form-control-sm" autocomplete="off"
														onchange="updateMonthAndYear()" /> <input type="text"
														id="date" name="record_date"
														th:value="${#dates.format(adminHolidayProfile?.record_date,'dd-MM-yyyy')}"
														th:if="${formmode}=='edit'"
														class="form-control form-control-sm" autocomplete="off"
														onchange="updateMonthAndYear()" /> <span id="span1"
														style="color: red;"></span> <input type="text" id="date"
														th:if="${formmode}=='view1'"
														th:value="${#dates.format(adminHolidayProfile?.record_date,'dd-MM-yyyy')}"
														class="form-control form-control-sm" autocomplete="off"
														readonly style="background-color: #f9fff6;" />
												</div>

												<div class="col-4 col-lg-2"></div>
												<div class="col-4 col-lg-2">
													<label for="month">Month</label>
												</div>
												<div class="col-4 col-lg-2">
													<input type="text" id="month" th:if="${formmode}=='view'"
														class="form-control form-control-sm" autocomplete="off"
														readonly style="background-color: #f9fff6;" /> <input
														type="text" id="month" value="" name="cal_month"
														th:if="${formmode}=='add'"
														class="form-control form-control-sm" autocomplete="off"
														readonly /> <input type="text" id="month"
														name="cal_month"
														th:value="${adminHolidayProfile?.cal_month}"
														th:if="${formmode}=='edit'"
														class="form-control form-control-sm" autocomplete="off" />
													<span id="span3" style="color: red;"></span> <input
														type="text" id="month" th:if="${formmode}=='view1'"
														th:value="${adminHolidayProfile?.cal_month}"
														class="form-control form-control-sm" autocomplete="off"
														readonly style="background-color: #f9fff6;" />
												</div>
											</div>
										</div>
										<div class="form-group mb-0">
											<div class="row formline">
												<div class="col-4 col-lg-2">
													<label for="recordNo">Record No </label>
												</div>
												<div class="col-4 col-lg-2">

													<input type="number" id="recordNo"
														th:if="${formmode}=='view'"
														class="form-control form-control-sm" autocomplete="off"
														readonly style="background-color: #f9fff6;" name="test1" />
													<input type="text" id="recordNo" th:if="${formmode}=='add'"
														th:value="${number}" class="form-control form-control-sm"
														name="record_srl" autocomplete="off" readonly /> <input
														type="text" id="recordNo" th:if="${formmode}=='edit'"
														th:value="${adminHolidayProfile?.record_srl}"
														class="form-control form-control-sm" name="record_srl"
														autocomplete="off" readonly
														style="background-color: #f9fff6;" /> <span id="span"
														style="color: red;"></span> <input type="text"
														id="recordNo" th:if="${formmode}=='view1'"
														th:value="${adminHolidayProfile?.record_srl}"
														class="form-control form-control-sm" autocomplete="off"
														readonly style="background-color: #f9fff6;" />
												</div>

												<label></label>

												<div class="col-4 col-lg-2"></div>
												<div class="col-4 col-lg-2">
													<label for="calendarYear">Calendar Year</label>
												</div>
												<div class="col-4 col-lg-2">
													<input type="text" id="calendarYear"
														th:if="${formmode}=='view'"
														class="form-control form-control-sm" autocomplete="off"
														readonly style="background-color: #f9fff6;" /> <input
														type="text" value="" id="calendarYear"
														th:if="${formmode}=='add'"
														class="form-control form-control-sm" name="cal_year"
														autocomplete="off" readonly /> <input type="text"
														id="calendarYear"
														th:value="${adminHolidayProfile?.cal_year}"
														th:if="${formmode}=='edit'"
														class="form-control form-control-sm" name="cal_year"
														autocomplete="off" /> <span id="span2"
														style="color: red;"></span> <input type="text"
														id="calendarYear" th:if="${formmode}=='view1'"
														th:value="${adminHolidayProfile?.cal_year}"
														class="form-control form-control-sm" autocomplete="off"
														readonly style="background-color: #f9fff6;" />

												</div>
											</div>

										</div>

										<div class="form-group mb-0">
											<div class="row formline">
												<div class="col-4 col-lg-2">
													<label for="description">Description</label>
												</div>
												<div class="col-4 col-lg-2">
													<input type="text" id="description"
														th:if="${formmode}=='view'"
														class="form-control form-control-sm" autocomplete="off"
														readonly style="background-color: #f9fff6;" /> <input
														type="text" value="" id="description"
														th:if="${formmode}=='add'"
														class="form-control form-control-sm" name="holiday_desc"
														autocomplete="off" /> <input type="text"
														th:value="${adminHolidayProfile?.holiday_desc}"
														id="description" th:if="${formmode}=='edit'"
														class="form-control form-control-sm" name="holiday_desc"
														autocomplete="off" /> <span id="span4"
														style="color: red;"></span> <input type="text"
														id="description" th:if="${formmode}=='view1'"
														th:value="${adminHolidayProfile?.holiday_desc}"
														class="form-control form-control-sm" autocomplete="off"
														readonly style="background-color: #f9fff6;" />
												</div>

												<div class="col-4 col-lg-2"></div>
												<div class="col-4 col-lg-2">
													<label for="recordStatus">Record Status</label>
												</div>
												<div class="col-4 col-lg-2">
													<input type="text" id="recordStatus"
														th:if="${formmode}=='view'"
														class="form-control form-control-sm" autocomplete="off"
														readonly style="background-color: #f9fff6;" /> <input
														type="text" id="recordStatus" value=""
														name="record_status" th:if="${formmode}=='add'"
														oninput="capitalizeInput(this)"
														class="form-control form-control-sm" autocomplete="off" />

													<input type="text" id="recordStatus" name="record_status"
														th:value="${adminHolidayProfile?.record_status}"
														th:if="${formmode}=='edit'"
														class="form-control form-control-sm" autocomplete="off" />
													<span id="span7" style="color: red;"></span> <input
														type="text" id="recordStatus" th:if="${formmode}=='view1'"
														th:value="${adminHolidayProfile?.record_status}"
														class="form-control form-control-sm" autocomplete="off"
														readonly style="background-color: #f9fff6;" />
												</div>
											</div>
										</div>
									</div>

									<div class="card-footer  text-center"
										style="font-family: 'Nunito', sans-serif; font-size: 23px; font-weight: 600; letter-spacing: 0.5px; line-height: 1.5; text-transform: capitalize; color: #333; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);">

										<button type="button" class="btn btn-dark btn-primary"
											id="btnHome" onclick="home();">Home</button>


										<a class="btn btn-dark btn-xs btn-primary text-white"
											id="btnModify" th:if="${formmode}=='view'"
											onclick="modifyData();">Modify</a>

										<button type="button" class="btn btn-dark btn-xs btn-primary"
											id="btnSubmit" th:if="${formmode}=='add'"
											th:attr="data-formmode=${formmode}" onclick="addUserData();">Submit</button>

										<button class="btn btn-dark btn-xs btn-primary" id="btnEdit"
											th:if="${formmode}=='edit'" form="travelMasterData"
											th:attr="data-formmode=${formmode}"
											onclick="modifyuserData(this);">Submit</button>

										<a class="btn btn-dark btn-xs btn-primary text-white"
											th:if="${formmode}=='view'" id="btnList"
											onclick="userList();">List</a>

										<button type="button" class="btn btn-dark btn-primary"
											id="btnBack" onclick="back();">Back</button>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>

				<div class="container-fluid "
					th:if="${formmode}=='list' OR ${formmode}=='view' OR ${formmode}=='list1'">
					<div class="row">

						<div class="w-100">
							<div class="container-fluid content">
								<div class="">
									<div class="card">

										<div class="panel panel-primary filterable">
											<div
												class="card-header d-flex justify-content-between align-items-center"
												style="font-family: 'Nunito', sans-serif; font-size: 23px; font-weight: 600; letter-spacing: 0.5px; line-height: 1.5; text-transform: capitalize; color: #333; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);">

												<!-- Left: Title -->
												<div style="font-size: 1.3rem;">HOLIDAY MASTER - LIST
												</div>

												<!-- Right: Dropdowns and Buttons -->
												<div class="d-flex align-items-center " >

													<!-- Organization Selection -->
													<select class="form-control mx-2" onchange="select_org();"
														style="color: white; background-color: black;" id="org_id"
														name="org_id">
														<option value="">Select Organization</option>
														<option th:each="OrgId : ${OrgIds}" th:value="${OrgId}"
															th:text="${OrgId}"></option>
													</select>

													<!-- Branch Selection -->
													<select class="form-control mx-1"
														onchange="select_branch1();"
														style="color: white; background-color: black;"
														id="branchId" name="branchId">
														<option value="">Select Branch</option>
														<option th:each="branchId : ${branchIds}"
															th:value="${branchId}" th:text="${branchId}"></option>
													</select>

													<!-- Add Button -->
													<button class="btn btn-primary text-white mx-1"
													style="background-color:black;color:white"
														onclick="adduser()"
														th:if="${formmode}=='view' OR ${formmode}=='list'"
														id="btnModify">Add</button>

													<!-- Filter Button -->
													<button class="btn btn-dark btn-sm mx-1"
														style="white-space:nowrap;height:35px;"
														onclick="add(event);">
														<i class="fas fa-filter"></i> Filter
													</button>
												</div>
											</div>

											<div class="card-body p-0">
												<div class="table-responsive"
													style="overflow-y: auto; max-height: 65vh; border: 1px solid #dee2e6;">
													<table class="table" id="table1">

														<thead
															style="position: sticky; top: 0; background-color: #f8f9fa; z-index: 1;">

															<tr class="filters">
																<th><input type="text"
																	class="form-control font-weight-bold"
																	placeholder="S.No" disabled></th>
																<th><input type="text"
																	class="form-control font-weight-bold"
																	placeholder="Month" disabled></th>
																<th><input type="text"
																	class="form-control font-weight-bold"
																	placeholder="Year" disabled></th>

																<th><input type="text"
																	class="form-control font-weight-bold"
																	placeholder="Date" disabled></th>
																<th><input type="text"
																	class="form-control font-weight-bold" placeholder="Day"
																	disabled></th>
																<th><input type="text"
																	class="form-control font-weight-bold"
																	placeholder="Description" disabled></th>
																<!-- <th><input type="text" class="form-control font-weight-bold"
																		placeholder="Remarks" disabled></th> -->
																<th>Select</th>
															</tr>
														</thead>

														<tbody id="hhkjhkjhkjhkjhk">
															<tr  th:each="associateProfile, itemstart : ${adminHolidayList}">
																<td style="width: 130px;"
																	th:text="${itemstart.index + 1}"></td>
																<!-- <td th:text="${associateProfile?.record_srl.intValue()}"></td> -->
																<td th:text="${associateProfile?.cal_month}"></td>
																<td style="width: 180px;"
																	th:text="${associateProfile?.cal_year}"></td>

																<td
																	th:text="${#dates.format(associateProfile?.record_date,'dd-MM-yyyy')}">
																</td>
																<td
																	th:text="${#dates.format(associateProfile?.record_date,'dd')}">
																</td>
																<td style="width: 300px;"
																	th:text="${associateProfile?.holiday_desc}"></td>
																<!-- <td th:text="${associateProfile?.holiday_remarks}"></td>
																 -->
																<td th:if="${formmode}=='list1'"><input
																	type="radio" class="form-control-md checkToModify"
																	th:value="${associateProfile?.record_srl}" /></td>

																<td th:if="${formmode}=='list'">
																	<!-- <input type="radio"
																	class="form-control-md checkToView"
																	th:value="${associateProfile?.record_srl}" /></td> -->


																	<div class="dropdown" style="margin-right: 30%;">
																		<!-- Radio Button (Triggers Dropdown, Not Direct Navigation) -->
																		<input type="radio" class="checkToOpenDropdown"
																			th:value="${associateProfile?.record_srl}"
																			style="margin: 0 5px;">

																		<!-- Dropdown (Hidden Initially) -->
																		<div class="dropdown-menu"
																			th:attr="aria-labelledby=${associateProfile?.record_srl}"
																			style="width: 30px; transform: translateX(-115px); display: none;">

																			<a class="dropdown-item checkToModify" href="#"
																				th:attr="data-id=${associateProfile?.record_srl}">Modify</a>

																			<a class="dropdown-item checkToView" href="#"
																				th:attr="data-id=${associateProfile?.record_srl}">View</a>
																		</div>
																	</div>

																</td>

															</tr>
														</tbody>
													</table>


													<table class="table" style="display: none" id="table2">

														<thead
															style="position: sticky; top: 0; background-color: #f8f9fa; z-index: 1;">

															<tr class="filters">
																<th><input type="text"
																	class="form-control font-weight-bold"
																	placeholder="S.No" disabled></th>
																<th><input type="text"
																	class="form-control font-weight-bold"
																	placeholder="Month" disabled></th>
																<th><input type="text"
																	class="form-control font-weight-bold"
																	placeholder="Year" disabled></th>

																<th><input type="text"
																	class="form-control font-weight-bold"
																	placeholder="Date" disabled></th>
																<th><input type="text"
																	class="form-control font-weight-bold" placeholder="Day"
																	disabled></th>
																<th><input type="text"
																	class="form-control font-weight-bold"
																	placeholder="Description" disabled></th>
																<!-- <th><input type="text" class="form-control font-weight-bold"
																		placeholder="Remarks" disabled></th> -->
																<th>Select</th>
															</tr>
														</thead>

														<tbody id="associateProfile_one">

														</tbody>
													</table>




												</div>
											</div>

											<div class="card-footer text-center"
												style="font-family: 'Nunito', sans-serif; font-size: 23px; font-weight: 600; letter-spacing: 0.5px; line-height: 1.5; text-transform: capitalize; color: #333; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);">
												<button type="button" class="btn btn-dark btn-primary"
													id="btnHome" style="width: 120px" onclick="home();">Home</button>

												<button type="button" class="btn btn-dark btn-primary"
													id="btnBack" style="width: 120px" onclick="back();">Back</button>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<br>
				<!-- <div class="container-fluid" th:if="${formmode}=='add' OR ${formmode}=='edit' OR ${formmode}=='view1'">
					<div class="card" >
						<div class="card-body text-center ">
							<div class="form-group " >
								<div class="container-fluid">
									<div class="row row-cols-2 row-cols-lg-3" th:if="${formmode}=='add' OR ${formmode}=='edit' OR ${formmode}=='view1'">
										<div class="col-4 col-lg-2">
											<label >Entry User:</label>
										</div>
										<div class="col-4 col-lg-2">
											 <input type="text" th:if="${formmode}=='view'"
												class="form-control form-control-sm" autocomplete="off"
												readonly  /> 
												type="text" th:value="${session.USERID}"
												th:if="${formmode}=='add' OR ${formmode}=='edit' OR ${formmode}=='view1'"
												class="form-control form-control-sm" autocomplete="off"
												readonly  />
										</div>
										<div class="col-4 col-lg-2">
											<label>Modify User:</label>
										</div>
										<div class="col-4 col-lg-2">
											<input type="text" th:if=" ${formmode}=='view1'"
												class="form-control form-control-sm" autocomplete="off"
												readonly  /> <input
												type="text" th:value="${session.USERID}"
												th:if="${formmode}=='add' OR ${formmode}=='edit'"
												class="form-control form-control-sm" autocomplete="off"
												readonly  />
										</div>
										<div class="col-4 col-lg-2">
											<label>Verify User:</label>
										</div>
										<div class="col-4 col-lg-2">
											 <input type="text" th:if="${formmode}=='view'"
												class="form-control form-control-sm" autocomplete="off"
												readonly  />  
												type="text"
												th:if="${formmode}=='add' OR ${formmode}=='edit' OR ${formmode}=='view1'"
												class="form-control form-control-sm" autocomplete="off"
												readonly  />
										</div>
									</div>
									<div class="row row-cols-2 row-cols-lg-3" th:if="${formmode}=='add' OR ${formmode}=='edit' OR ${formmode}=='view1'">
										<div class="col-4 col-lg-2">
											<label>Entry Date:</label>
										</div>
										<div class="col-4 col-lg-2">
											 <input type="text" th:if="${formmode}=='view'"
												class="form-control form-control-sm" autocomplete="off"
												readonly  /> 
												type="text" th:if="${formmode}=='add' OR ${formmode}=='edit' OR ${formmode}=='view1'"
												th:value="${#calendars.format(#calendars.createNow(), 'dd-MM-yyyy HH:mm')}"
												class="form-control form-control-sm" autocomplete="off"
												readonly  />
										</div>
										<div class="col-4 col-lg-2">
											<label>Modify Date:</label>
										</div>
										<div class="col-4 col-lg-2">
											<input type="text" th:if="${formmode}=='view1'"
												class="form-control form-control-sm" autocomplete="off"
												readonly  /> <input
												type="text" th:if="${formmode}=='add' OR ${formmode}=='edit'"
												th:value="${#calendars.format(#calendars.createNow(), 'dd-MM-yyyy HH:mm')}"
												class="form-control form-control-sm" autocomplete="off"
												readonly  />
										</div>
										<div class="col-4 col-lg-2">
											<label>Verify Date:</label>
										</div>
										<div class="col-4 col-lg-2">
											 <input type="text" th:if="${formmode}=='view'"
												class="form-control form-control-sm" autocomplete="off"
												readonly  />  
												type="text" th:if="${formmode}=='add' OR ${formmode}=='edit' OR ${formmode}=='view1'"
												class="form-control form-control-sm" autocomplete="off"
												readonly  />
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div align="right" style="margin-left: 870px; font-size: 18px">
						Status : <font style="color: #00cc00; font-size: 18px">ACTIVE</font>
					</div>
				</div>
		</div>
	</div> -->

				<div class="modal fade" id="alert">
					<div
						class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
						<div class="modal-content">
							<div class="menu-title-header">
								<div class="modal-title" id="exampleModalLabel"
									style="text-align: center; color: white;">ERP</div>
							</div>
							<div class="modal-body"
								style="text-align: center; background-color: #c6ccd2">
								<p id="alertmsg" style="font-size: 16px;"></p>
								<button type="button" class="btn btn-dark btn-primary"
									data-dismiss="modal" style="width: 120px" onclick="back();">Close</button>
							</div>
						</div>
					</div>
				</div>
			</div>
</body>
<script>
function openDropdown(element) {
    // Close all other open dropdowns
    $(".dropdown-menu").each(function () {
        $(this).hide(); // Hide any visible dropdowns
    });
    // Toggle the current dropdown menu
    const dropdownMenu = element.nextElementSibling; // Get the dropdown menu
    if (dropdownMenu) {
        $(dropdownMenu).toggle(); // Use jQuery to toggle visibility
    }
}
</script>

</html>