<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>BDOC</title>

<link rel="stylesheet" type="text/css"
	href="/webjars/bootstrap/4.3.1/css/bootstrap.css"
	th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.css}">
<script src="/webjars/bootstrap/4.3.1/js/bootstrap.js"
	th:src="@{/webjars/bootstrap/4.3.1/js/bootstrap.js}"></script>
<script src="/webjars/jquery/3.4.1/jquery.js"
	th:src="@{/webjars/jquery/3.4.1/jquery.js}"></script>

<link rel="shortcut icon" th:href="@{/favicon.ico}" type="image/x-icon">
<link rel="icon" th:href="@{/favicon.ico}" type="image/x-icon">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">

<!-- Bootstrap CSS -->
<link
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
	rel="stylesheet">

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

<!-- Popper.js (required for Bootstrap dropdowns) -->
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js"></script>

<!-- Bootstrap JS -->
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<!-- jQuery and jQuery UI (Include if not already added) -->
<link rel="stylesheet"
	href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>



<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

<!-- Add this before closing </body> -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script
	src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
<link rel="stylesheet" href="css/style.css">




<style>
.custom-input {
	height: 30px; /* Adjust the height as needed */
	padding: 5px; /* Adjust padding as needed */
}
</style>
<style>
input, select {
	height: 30px; /* Adjust height */
	padding: 5px; /* Adjust padding */
	border-radius: 5px; /* Rounded corners */
	border: 1px solid #ccc; /* Light gray border */
	box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
	/* Inner shadow for 3D effect */
	outline: none; /* Remove outline on focus */
	transition: border-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
	/* Smooth transition */
}

/* Add a hover effect for better UI */
input:hover, select {
	border-color: #007bff; /* Change border color on hover */
}

/* Add focus effect for interaction feedback */
input:focus, select {
	border-color: #007bff; /* Change border color on focus */
	box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
	/* Light blue shadow on focus */
}
</style>

<style>
 
/*or*/
 
ul.l {
	list-style-type: square;
}

ul.li {
	list-style-type: inherit;
}

.card-header {
	display: flex;
	float: left;
}

label {
	font-size: 1px;
}

#exampleModalLabel {
	color: white;
}

#menulist {
	margin-top: 10px;
}

#page {
	position: absolute;
	right: 0;
	margin-right: 20px;
}

.table {
	text-align: center;
}

label {
	font-size: 16px;
}
</style>


<style>
/* Style for the loading modal */
#loadingModal {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background-color: none; /* Semi-transparent background */
	display: flex;
	justify-content: center;
	align-items: center;
	z-index: 9999; /* Make sure it's on top */
	backdrop-filter: blur(5px); /* Apply background blur */
}

#loadingContent {
	text-align: center;
	background-color: none; /* White background for loading content */
	z-index: 10000; /* Ensure loading content stays above blur */
}

#loadingContent img {
	width: 100px; /* Adjust size as needed */
	height: 100px; /* Adjust size as needed */
	margin-bottom: 10px;
}
</style>



<style type="text/css">
.navbar {
	margin-left: -5px;
	position: fixed; /* Keep it fixed */
	top: 0;
	width: 100%;
	z-index: 1000; /* Ensure it's above other elements */
}

.content {
	margin-top: 151px ! important; /* Push content down to avoid overlap */
}

.container-fluid {
	width: 100%;
	padding-top: 5px;
	padding-right: 0px;
	padding-left: 15px;
	margin-right: auto;
	margin-left: auto;
}

.container-manager1 {
	padding-right: 47px;
	padding-left: 132px;
}

.row {
	display: -ms-flexbox;
	display: flex;
	-ms-flex-wrap: wrap;
	flex-wrap: wrap;
	margin-right: -8px;
	margin-left: -22px;
}
</style>
<script type="text/javascript">
$(document).ready(function () {
    $('.dropdown, .dropdown-submenu').hover(function () {
        $(this).children('.dropdown-menu').stop(true, true).delay(200).fadeIn(200);
    }, function () {
        $(this).children('.dropdown-menu').stop(true, true).delay(200).fadeOut(200);
    });
});
</script>




<script th:inline="javascript">
	var checkboxes = document.querySelectorAll("input[type='checkbox']");
	function check(mycheck) {
		if (mycheck == true) {
			checkboxes.forEach(function(checkbox) {
				checkbox.checked = true;
			});
		} else {
			checkboxes.forEach(function(checkbox) {
				checkbox.checked = false;
			});
		}
	}
	function adduser() {
		document.getElementById('loadingModal').style.display = 'flex';
		location.href = 'BDOCUserProfile?formmode=add'
	}

	function list() {
		document.getElementById('loadingModal').style.display = 'flex';
		location.href = 'HRMSUserProfile?formmode=list';
	}
	function home() {
		document.getElementById('loadingModal').style.display = 'flex';
		location.href = 'Dashboard'
	}

	function getvalue() {
		/* $('#log').empty(); */
		//$( "#log" ).load(window.location.href + " #log" );
		var data = "";
		$('#exampleModal :checkbox:checked').each(function() {
			var status = (this.checked ? $(this).val() : "");
			var id = $(this).attr("id");
			$('#log').show();

			$('#menucontent').hide();

			data += "<p>" + id + "</p>";

		});

		$('#log').append(data);
		/*  $('#log').append("<h3>" + id + " : " + status + "</h3>"); */
	}

	function menulist() {
		var name = document.getElementById("role_desc").value;

		if (name == "Admin") {
			document.getElementById("admin").checked = true;
			document.getElementById("Maintenance").checked = true;
			document.getElementById("Operations").checked = true;
			document.getElementById("Placement").checked = true;
			document.getElementById("Inquiries").checked = true;
			document.getElementById("Reports").checked = true;

		} else if (name == "General") {
			document.getElementById("admin").checked = false;
			document.getElementById("Maintenance").checked = false;
			document.getElementById("Operations").checked = true;
			document.getElementById("Placement").checked = true;
			document.getElementById("Inquiries").checked = true;
			document.getElementById("Reports").checked = true;

		} else if (name == "Audit") {
			document.getElementById("admin").checked = false;
			document.getElementById("Maintenance").checked = true;
			document.getElementById("Operations").checked = true;
			document.getElementById("Placement").checked = true;
			document.getElementById("Inquiries").checked = true;
			document.getElementById("Reports").checked = true;

		} else if (name == "Inquiry") {
			document.getElementById("Admin").checked = false;
			document.getElementById("Maintenance").checked = true;
			document.getElementById("Operations").checked = true;
			document.getElementById("Placement").checked = true;
			document.getElementById("Inquiries").checked = true;
			document.getElementById("Reports").checked = true;

		} else if (name == "MIS") {
			document.getElementById("Admin").checked = false;
			document.getElementById("Maintenance").checked = false;
			document.getElementById("Operations").checked = false;
			document.getElementById("Placement").checked = false;
			document.getElementById("Inquiries").checked = true;
			document.getElementById("Reports").checked = true;

		}
	}

	function submitform(a) {

		var role_id = $("#role_id").val();
		alert(role_id)

		if ($("#formdata").valid()) {

			if (role_id != ' ') {
				var checkBoxAdminValue, adminValue, cbAudit, auditValue, cbIPSOperations, IPSOperationsValue, CBMonitoring, monitoringValue, cbmy_tregistration, my_tregistrationValue;
				var finalVar = [];

				checkBoxAdminValue = document.querySelector("#Admin:checked");
				adminValue = (checkBoxAdminValue) ? 'Y' : 'N';
				if (adminValue === "Y") {
					finalVar.push("Admin");
				}

				ipsparameter = document.querySelector("#Maintenance:checked");
				ipsparavalue = (ipsparameter) ? 'Y' : 'N';

				if (ipsparavalue === "Y") {
					finalVar.push("Maintenance");
				}

				cbAudit = document.querySelector("#Operations:checked");
				auditValue = (cbAudit) ? 'Y' : 'N';

				if (auditValue === "Y") {
					finalVar.push("Operations");
				}
				cbIPSOperations = document.querySelector("#Placement:checked");
				IPSOperationsValue = (cbIPSOperations) ? 'Y' : 'N';
				if (IPSOperationsValue === "Y") {
					finalVar.push("Placement");
				}
				CBMonitoring = document.querySelector("#Inquires:checked");
				monitoringValue = (CBMonitoring) ? 'Y' : 'N';
				if (monitoringValue === "Y") {
					finalVar.push("Inquires");
				}

				cbmy_tregistration = document.querySelector("#Report:checked");
				my_tregistrationValue = (cbmy_tregistration) ? 'Y' : 'N';
				if (my_tregistrationValue === "Y") {
					finalVar.push("Report");
				}

				var finalString = finalVar.join(',');
				if (finalString == "") {
					$("#alertmsg1").text("Please Select Menu List");

					$('#alert1').modal("toggle");
				} else {
					var url = "./addAccessRole?" + '&adminValue=' + adminValue
							+ '&auditValue=' + auditValue
							+ '&IPSOperationsValue=' + IPSOperationsValue
							+ '&monitoringValue=' + monitoringValue
							+ '&my_tregistrationValue=' + my_tregistrationValue
							+ '&finalString=' + finalString;
					$("#formdata").attr('action', url);

					var options = {
						success : showResponse
					};

					$("#formdata").ajaxSubmit(options);

					function showResponse(responseText, statusText, xhr, $form) {

						$("#alertmsg").text(responseText);

						$('#alert').modal("toggle");

					}
					;
				}

			} else {
				$("#alertmsg1").text("Please fill the Role ID");

				$('#alert1').modal("toggle");
			}
		}

	};
	function getvalue() {
		/* $('#log').empty(); */
		//$( "#log" ).load(window.location.href + " #log" );
		var data = "";
		var n1 = document.getElementById('log').innerText;
		document.getElementById('log').innerHTML = "";

		$('#finusers :checkbox:checked').each(function() {

			var status = (this.checked ? $(this).val() : "");
			var id = $(this).attr("id");
			$('#log').show();

			$('#menucontent').hide();

			data += "<p>" + id + "</p>";

		});

		$('#log').append(data);
		/*  $('#log').append("<h3>" + id + " : " + status + "</h3>"); */
	}
</script>

<script>
	function back() {
		document.getElementById('loadingModal').style.display = 'flex';
		event.preventDefault();
		window.history.back();
	}
</script>
<script>
	function register_add(event) {
		event.preventDefault(); // Prevent form submission

		
		
		// Retrieve values from the fields
		var userid1 = document.getElementById('userid').value;

		var splitfun = userid1.split('-');
		var resourceidd = splitfun[0];

		// Initialize FormData correctly
		var formdata = new FormData(document
				.getElementById('hrmsuserProfileadd'));
		formdata.append('userId', resourceidd);

		// Retrieve form fields
		var username = document.getElementById('userNames');
		var designation = document.getElementById('designation');
		var emailid = document.getElementById('emailid');
		var mobileno = document.getElementById('mobileno');
		var role = document.getElementById('role');
		var passExpDate = document.getElementById('passExpDate').value;

		// Initialize a flag for validation
		var isValid = true;

		// Helper function to validate fields
		function validateField(field) {
			if (field.tagName === "SELECT") {
				if (field.value === "") {
					field.classList.add('error-border');
					isValid = false;
				} else {
					field.classList.remove('error-border');
				}
			} else {
				if (field.value.trim() === '') {
					field.classList.add('error-border');
					isValid = false;
				} else {
					field.classList.remove('error-border');
				}
			}
		}

		// Validate email address
		function validateEmail(field) {
			var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
			if (!emailRegex.test(field.value.trim())) {
				field.classList.add('error-border');
				isValid = false;
				alert("Please enter a valid email address!");
			} else {
				field.classList.remove('error-border');
			}
		}

		// Validate all fields
		validateField(document.getElementById('userid')); // Pass actual input element
		validateField(username);
		validateField(designation);
		validateEmail(emailid); // Special validation for email
		validateField(mobileno);
		validateField(role);

		// If validation fails, stop execution
		if (!isValid) {
			alert("Please fill all required fields!");
			return;
		}

		// Debugging alert
		alert(userid1);

		// AJAX call to send form data
		$.ajax({
			url : './hrmscreateUser?formmode=add',
			data : formdata,
			type : 'POST',
			processData : false, // Prevent jQuery from automatically processing the data
			contentType : false, // Prevent jQuery from setting the content type
			  // Show the loading modal before sending the request
            beforeSend: function() {
                document.getElementById('loadingModal').style.display = 'flex'; // Show the loading modal
            },
			success : function(data) {
				$("#alertmsg").text("User Added successfully");
				$('#alert').modal("toggle");
				document.getElementById('loadingModal').style.display = 'none';
			},
			
			
			error : function(xhr, status, error) {
				alert("An error occurred: " + xhr.responseText);
			}
		});
	}
</script>


<style>
.formline {
	padding-bottom: 0px;
	padding: 0px;
}

.modal-footer {
	float: center;
	text-align: center;
}
</style>




<script>
	function validateMobileNumber(input) {
		const mobileHelp = document.getElementById('mobileHelp');
		if (input.value.length === 10) {
			mobileHelp.style.display = 'none';
		} else {
			mobileHelp.style.display = 'block';
		}
	}
</script>


<script>
	document.addEventListener("DOMContentLoaded", function() {

		document.getElementById("emailid").addEventListener("input",
				function() {
					const emailField = this;
					const emailValue = emailField.value.trim();
					const emailError = document.getElementById("emailError");

					// Regular expression for email validation
					const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

					// Check if the email matches the regex
					if (emailValue == "" || emailRegex.test(emailValue)) {
						emailError.style.display = "none"; // Hide the error message
						emailField.classList.remove("is-invalid");
						emailField.classList.add("is-valid");
						emailval = true;
						//alert(emailval);
					} else {
						emailError.style.display = "block"; // Show the error message
						emailField.classList.remove("is-valid");
						emailField.classList.add("is-invalid");
						emailval = false;
					}
				});
	});
</script>

<script>
	function viewuser(a) {
		  document.getElementById('loadingModal').style.display = 'flex';
		var userid = a.getAttribute('data-userId');
		//alert("USER ID :" + userid);

		location.href = './HRMSUserProfile?formmode=view&userId=' + userid;

	}

	function verifyuser(a) {
		 
        document.getElementById('loadingModal').style.display = 'flex';
		var userid = a.getAttribute('data-userId');
		//alert("USER ID :" + userid);

		location.href = './HRMSUserProfile?formmode=verify&userId=' + userid;

	}

	function Modifyuserscreen(a) {
		  
        document.getElementById('loadingModal').style.display = 'flex';

		var userid = a.getAttribute('data-userId');
		//alert("USER ID :" + userid);
		location.href = './HRMSUserProfile?formmode=modify&userId=' + userid;
	}

	function deleteuser(a) {
		
        document.getElementById('loadingModal').style.display = 'flex';

		var userid = a.getAttribute('data-userId');
		//alert("USER ID :" + userid);
		location.href = './HRMSUserProfile?formmode=delete&userId=' + userid;
	}
</script>

<script>
	function verifysubmit(event) {
		event.preventDefault();

		var verifyid = document.getElementById('userid').value; // Fetching the user ID value

		// Displaying the fetched ID in an alert
		alert(verifyid);

		// Making an AJAX request to verify the user
		$.ajax({
			url : './verifyuser?userId=' + encodeURIComponent(verifyid), // Ensuring safe URL encoding
			type : 'POST',
			  // Show the loading modal before sending the request
            beforeSend: function() {
                document.getElementById('loadingModal').style.display = 'flex'; // Show the loading modal
            },
			success : function(data) {
				// Displaying a success message in the modal
				$("#alertmsg").text(data);
				$('#alert').modal("toggle"); // Showing the modal
				  // Hide the loading modal after the response is received
		        document.getElementById('loadingModal').style.display = 'none';
			},
			
			error : function(xhr, status, error) {
				// Handling errors during the AJAX call
				console.error("Error occurred: " + error);
				$("#alertmsg").text(
						"User verification failed. Please try again.");
				$('#alert').modal("toggle"); // Showing the modal with an error message
			}
		});
	}
</script>

<script>
	function deleteusersubmit(event) {
		event.preventDefault();

		var userid = document.getElementById('userid').value;

		$.ajax({
			url : './deleteuser?userId=' + encodeURIComponent(userid), // Ensuring safe URL encoding
			type : 'POST',
			  // Show the loading modal before sending the request
            beforeSend: function() {
                document.getElementById('loadingModal').style.display = 'flex'; // Show the loading modal
            },
			success : function(data) {
				// Displaying a success message in the modal
				$("#alertmsg").text(data);
				$('#alert').modal("toggle"); // Showing the modal
				document.getElementById('loadingModal').style.display = 'none';
			},
			error : function(xhr, status, error) {
				// Handling errors during the AJAX call
				console.error("Error occurred: " + error);
				$("#alertmsg").text(
						"User verification failed. Please try again.");
				$('#alert').modal("toggle"); // Showing the modal with an error message
			}
		});

	}
</script>

<script>
	function Modifyusersubmit(event) {

		event.preventDefault();

		// Retrieve values from the fields
		var userid = document.getElementById('userid');
		var username = document.getElementById('userNames');
		var designation = document.getElementById('designation');
		var emailid = document.getElementById('emailid');
		var mobileno = document.getElementById('mobileno');
		var role = document.getElementById('role'); // Select box
		var passExpDate = document.getElementById('passExpDate').value;
		
		


		// Initialize a flag for validation
		var isValid = true;

		// Helper function to check if a field is empty or invalid
		function validateField(field) {
			if (field.tagName === "SELECT") {
				// Check if a valid option is selected
				if (field.value === "") {
					field.classList.add('error-border');
					isValid = false;
				} else {
					field.classList.remove('error-border');
				}
			} else {
				// Check for empty text inputs
				if (field.value.trim() === '') {
					field.classList.add('error-border');
					isValid = false;
				} else {
					field.classList.remove('error-border');
				}
			}
		}

		// Validate email address
		function validateEmail(field) {
			var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; // Simple email regex
			if (!emailRegex.test(field.value.trim())) {
				field.classList.add('error-border');
				isValid = false;
				alert("Please enter a valid email address!");
			} else {
				field.classList.remove('error-border');
			}
		}

		// Validate each field
		validateField(userid);
	
		validateField(username);

		validateField(designation);

		validateEmail(emailid); // Special validation for email
		validateField(mobileno);
		validateField(role);

		if (!isValid) {
			alert("Please fill all required fields!");
			return;
		}

		// Make the AJAX call if all fields are valid
		$.ajax({
			url : './hrmscreateUser?formmode=modify',
			data : $("#hrmsuserProfilemodify").serialize(),
			type : 'POST',
			 beforeSend: function() {
	                document.getElementById('loadingModal').style.display = 'flex'; // Show the loading modal
	            },
			success : function(data) {
				document.getElementById('loadingModal').style.display = 'none';
				$("#alertmsg").text("User Modified successfully");
				$('#alert').modal("toggle");
				
			}
		});

	}
</script>
<script>
	function forname(event) {
		event.preventDefault();
		var resourceId = document.getElementById('userid').value;
		var splitfun = resourceId.split('-');
		var resourceidd = splitfun[0];
		var resourcename = splitfun[1];
	
		document.getElementById('userNames').value = resourcename;
		document.getElementById('employeeid').value=resourceidd;
		document.getElementById('employeename').value=resourcename;
		
		
		  $.ajax({
		        url: './getuserdetailsresource',
		        type: 'GET', // Fixed case sensitivity
		        data: { resource_id: resourceidd },
		        dataType: 'json',
		        success: function(response) {
		        	
		        	   var userDetails = response[0];
		    
		                document.getElementById('designation').value = userDetails.design;
		                document.getElementById('emailid').value = userDetails.email;
		                document.getElementById('mobileno').value = userDetails.mobile;
		          
		        }
		    });

	}
</script>

<script>

function capitalizeInput(input) {
	let value = input.value;
	// Only change the first letter to uppercase if it's lowercase
	value = value.replace(/\b[a-z]/g, function (char) {
		return char.toUpperCase();
	});
	input.value = value;
}
</script>


<script>


function select_branch() {
  
   // const branchId = document.getElementById('branchId').value;
    
    const org_id = document.getElementById('org_id').value.trim();
    const branchId = document.getElementById('branchId').value.trim();

    if (!org_id || !branchId) {
        alert("Please select both Organization and Branch.");
        return;
    }


    $.ajax({
        url: './getuserbranchlist?branchId=' + branchId + '&org_id=' +org_id ,
        type: 'GET',
        dataType: 'json',

        success: function(response) {
            const tableBody = document.getElementById('dataTablesBody');
            tableBody.innerHTML = ''; // Clear existing data

            if (response.length === 0) {
                tableBody.innerHTML = `<tr><td colspan="8" style="text-align: center; color: red;">No records found.</td></tr>`;
            } else {
                response.forEach(userlist => {
                    let userStatus = (userlist.userStatus === 'N' || userlist.userStatus == null) ? 'UNVERIFIED' : 'VERIFIED';
                    let statusColor = (userlist.userStatus === 'N' || userlist.userStatus == null) ? 'red' : 'green';

                    let row = `<tr>
                        <td>${userlist.userId}</td>
                        <td>${userlist.userNames}</td>
                        <td>${userlist.employeeId}</td>
                        <td>${userlist.role}</td>
                        <td>${userlist.mobileNo}</td>
                        <td>${userlist.emailId}</td>
                        <td style="text-align: left; color: ${statusColor};">${userStatus}</td>
                        <td style="text-align: center;">
                            <div class="dropdown" style="text-align: center;">
                                <button class="btn btn-secondary dropdown-toggle"
                                    type="button"
                                    title="Action"
                                    style="line-height: 0.7; font-size: 13px; color: #3a4550; background: #e3e3e4;"
                                    data-toggle="dropdown"
                                    aria-haspopup="true"
                                    aria-expanded="false">Action</button>
                                <div class="dropdown-menu" style="background-color: #e3e3e4; color: #3a4550;">
                                    <a class="dropdown-item" title="View" data-userId="${userlist.userId}" style="cursor: pointer;" onclick="viewuser(this)">View</a>
                                    ${userlist.userStatus === 'Y' ? `<a class="dropdown-item" title="Modify" data-userId="${userlist.userId}" style="cursor: pointer;" onclick="Modifyuserscreen(this)">Modify</a>` : ''}
                                    ${userlist.userStatus === 'N' || userlist.userStatus == null ? `<a class="dropdown-item" title="Verify" data-userId="${userlist.userId}" style="cursor: pointer;" onclick="verifyuser(this)">Verify</a>` : ''}
                                    <a class="dropdown-item" title="Delete" data-userId="${userlist.userId}" style="cursor: pointer;" onclick="deleteuser(this)">Delete</a>
                                </div>
                            </div>
                        </td>
                    </tr>`;


                    tableBody.insertAdjacentHTML('beforeend', row);
                });
            }
        },
        error: function(xhr, status, error) {
            alert("Error: " + error);
        }
    });
}


</script>

<script>

function select_org() {
    const org_id = document.getElementById('org_id').value;

    $.ajax({
        url: './getorglist?org_id=' + org_id,
        type: 'GET',
        dataType: 'json',
        success: function(response) {
            const branchSelect = document.getElementById('branchId');
            branchSelect.innerHTML = '<option value="">Select Branch</option>';

            response.forEach(function(branchId) {
                const option = document.createElement('option');
                option.value = branchId;
                option.text = branchId;
                branchSelect.appendChild(option);
            });
        },

        error: function(xhr, status, error) {
            alert("Error: " + error);
        }
    });
}



</script>


</head>

<body>
	<div class="container-fluid">
		<div class="row">
			<div class="col-4 col-sm-2">
				<div th:insert="BTMHeaderMenu :: header"></div>
			</div>
			<div class="col-sm-12">
				<div class="container-fluid content">
					<div class="row">
						<div class="col-sm-12">


							<div th:if="${formmode}=='list'">
								<div>
									<div class="container-manager"
										style="background-color: #f5f5f5; padding: 10px; height: 50px;">

										<div class="float-left">
											<div STYLE="font-size: 1.3rem; font-weight: bold;">
												<i class="fas fa-list mr-1"></i>USER PROFILE
											</div>
										</div>
										<div class=" float-right">
											<button class="btn btn-primary button-style" type="button"
												onclick="adduser();">
												<i class="fa fa-user-plus "></i> Create User
											</button>

										</div>
									</div>
									<!-- <div class="card-body"> -->
									<div class="table-responsive"
										style="overflow-y: auto; max-height: 68vh; border: 1px solid #dee2e6;">


										<table class="table  table-bordered  table-hover "
											style="margin-bottom: 0px; margin-top: 10px;" id="usertable">
											<thead
												style="position: sticky; top: 0; background-color: #f8f9fa; z-index: 1;">

												<tr>
													<!-- <th></th> -->
													<th style="text-align: center;">User Id</th>
													<th style="text-align: center; width: 15%;">User Name</th>
													<th style="text-align: center;">Emp Id</th>
													<th style="text-align: center;">Category</th>
													<th style="text-align: center;">Mobile No</th>
													<th style="text-align: center;">Email</th>
													<th style="text-align: center;">Status</th>
													<th style="text-align: center;">Action</th>



												</tr>
											</thead>


											<tbody id="dataTablesBody">
												<!-- Display message when the list is empty -->
												<tr th:if="${#lists.isEmpty(UserProfilelist)}">
													<td colspan="7"
														style="color: red; font-size: 20px; text-align: center;">No
														data found</td>
												</tr>

												<!-- Iterate over the user profile list -->
												<tr th:each="userlist : ${UserProfilelist}">

													<!-- User details columns -->
													<td style="text-align: left;" th:text="${userlist.userId}"></td>
													<td
														style="text-transform: uppercase; text-align: left; width: 15%;"
														th:text="${userlist.userNames}"></td>
													<td style="text-align: left;"
														th:text="${userlist.employeeId}"></td>
													<td style="text-align: center;" th:text="${userlist.role}"></td>
													<td th:text="${userlist.mobileNo}"></td>
													<td style="text-align: left; width: 20%;"
														th:text="${userlist.emailId}"></td>
													<!-- <td th:text="${userlist.userStatus}"></td> -->
													<td style="text-align: left;"
														th:text="${userlist.userStatus == 'N' || userlist.userStatus == null ? 'UNVERIFIED' : 'VERIFIED'}"
														th:style="${userlist.userStatus == 'N' || userlist.userStatus == null ? 'color:red' : 'color:green'}"></td>


													<!-- Action dropdown -->
													<td style="text-align: center;">
														<div class="dropdown" style="text-align: center;">
															<button class="btn btn-secondary dropdown-toggle"
																type="button" id="dropdownMenuButton" title="Action"
																style="line-height: 0.7; font-size: 13px; color: #3a4550; background: #e3e3e4;"
																data-toggle="dropdown" aria-haspopup="true"
																aria-expanded="false">Action</button>

															<div class="dropdown-menu"
																aria-labelledby="dropdownMenuButton"
																style="background-color: #e3e3e4; color: #3a4550;">


																<!-- 	<a class="dropdown-item" title=" Modify"
																style="cursor: pointer;" onclick="modifyscreen(this)">Modify</a> -->

																<a class="dropdown-item" title="view"
																	th:attr="data-userId=${userlist.userId}"
																	style="cursor: pointer;" onclick="viewuser(this)">View</a>
																<a class="dropdown-item" title="Modify"
																	th:if="${userlist.userStatus == 'Y'} "
																	th:attr="data-userId=${userlist.userId}"
																	style="cursor: pointer;"
																	onclick="Modifyuserscreen(this)">Modify</a> <a
																	th:if="${userlist.userStatus == 'N' || userlist.userStatus == null } "
																	class="dropdown-item" title=" verify"
																	th:attr="data-userId=${userlist.userId}"
																	style="cursor: pointer;" onclick="verifyuser(this)">Verify</a>

																<a class="dropdown-item" title="Delete"
																	th:attr="data-userId=${userlist.userId}"
																	style="cursor: pointer;" onclick="deleteuser(this)">Delete</a>


															</div>
														</div>

													</td>
												</tr>
											</tbody>

										</table>
									</div>


									<!-- </div> -->



									<div class=" col-sm-13 text-center ">
										<div style="background: #f5f5f5; color: white; padding: 10px">
											<button class="btn btn-xs btn-dark"
												Style="width: 100px; background: black; color: white;"
												type="button" id="Dashboard" onclick="contentLoad(this)">Home</button>
											<button class="btn btn-xs btn-dark"
												Style="width: 100px; background: black; color: white;"
												id="btnback" onclick="back();">Back</button>

										</div>
									</div>
								</div>
							</div>

							<!-- -------------- list end ----------->
							<!--  ------------- add start-------- -->

							<div
								th:if="${formmode}=='view' OR ${formmode}=='add'   OR ${formmode}=='edit' OR ${formmode}=='delete' OR ${formmode}=='verify'  OR ${formmode}=='viewnew'"
								class="container-manager"
								style="margin-top: auto; margin-left: auto;">
								<div class="transparent-shadow">
									<div class="row">
										<div class="col-sm-12 ">
											<div class="card">
												<div class="card-header"
													style="background-color: #f5f5f5; padding: 10px; height: 50px;">

													<div class="capword" th:if="${formmode}=='add'">
														<i class="fas fa-user-plus mr-2"></i>USER PROFILE - Add
													</div>
													<div class="capword" th:if="${formmode}=='edit'">
														<i class="fas fa-user-plus mr-2"></i>USER PROFILE - Modify
													</div>
													<div class="capword" th:if="${formmode}=='view'">
														<i class="fas fa-user-plus mr-2"></i>USER PROFILE - View
													</div>
													<div class="capword" th:if="${formmode}=='viewnew'">
														<i class="fas fa-user-plus mr-2"></i>USER PROFILE - View
													</div>
													<div class="capword" th:if="${formmode}=='verify'">
														<i class="fas fa-user-plus mr-2"></i>USER PROFILE - View
													</div>
													<div class="capword" th:if="${formmode}=='delete'">
														<i class="fas fa-user-plus mr-2"></i>USER PROFILE - View
													</div>
												</div>
												<div class="card-body">
													<form action="#" th:object="${userlist}" method="post"
														autocomplete="off" id="hrmsuserProfileadd"
														th:fragment="finuserapply">
														<div class="form-group  ">
															<div class="form-row mt-2  ">
																<div class="col-4 col-sm-2">
																	<label for="userId">User ID <span
																		th:if="${formmode}=='add'"
																		 >*</span></label>
																</div>
																
																<div th:if="${formmode}=='add'" class="col-4 col-sm-2">
																	<input type="text"
																		onkeyup="this.value = this.value.toUpperCase();handleInputUserId(this)"
																		id="userId" name="userid" maxlength="10"
																		class="form-control form-control-sm autocomplete    "
																		autocomplete="off" required />
																</div>
																<div
																	th:if="${formmode}=='edit' OR ${formmode}=='verify'    OR ${formmode}=='view'  OR ${formmode}=='viewnew' OR ${formmode}=='delete'"
																	class="col-4 col-sm-2">
																	<input type="text"
																		onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																		id="userId" name="userid"
																		th:value="${userProfile?.userid}"
																		class="form-control form-control-sm  "
																		autocomplete="off" required
																		th:readonly="${userProfile?.entity_flg=='N'} OR ${formmode}=='verify'  OR ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='edit'" />
																</div>
																<div class="col-4 col-sm-2"></div>
																<div class="col-4 col-sm-2">
																	<label for="userName">User Name <span
																		 
																		th:if="${formmode}=='add'">*</span></label>
																</div>
																<div th:if="${formmode}=='add'" class="col-4 col-sm-2">
																	<input type="text" id="userName" name="username"
																		maxlength="50"
																		onkeyup="this.value = this.value.toUpperCase(); updateUserName(this.value);handleInUserName(this)"
																		class="form-control form-control-sm  "
																		autocomplete="off" required />
																</div>
																<div class="col-4 col-sm-2"
																	th:if="${formmode}=='edit' OR ${formmode}=='verify' OR ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='delete'  ">
																	<input type="text" th:value="${userProfile?.username}"
																		id="userName" name="username"
																		onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																		class="form-control form-control-sm  "
																		autocomplete="off" required
																		th:readonly="${userProfile?.entity_flg=='N'} OR ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='verify' OR ${formmode}=='edit'" />
																</div>
															</div>
															<div class="form-row mt-2  mt-2 ">
																<label class="col-4 col-sm-2">Bank Code <span
																	 
																	th:if="${formmode}=='add'">*</span></label>
																<div th:if="${formmode}=='add'" class="col-4 col-sm-2">
																	<input type="text" name="bank_code"
																	 
																		onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																		id="bankCode" class="form-control form-control-sm  "
																		autocomplete="off" required  >
																</div>
																<div class="col-4 col-sm-2"
																	th:if="${formmode}=='edit' OR ${formmode}=='verify' OR ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='delete'  ">
																	<input type="text" name="bank_code"
																		th:value="${userProfile?.bank_code}" id="bankCode"
																		class="form-control form-control-sm  "
																		autocomplete="off" required
																		onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																		th:readonly="${userProfile?.entity_flg=='N'} OR ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='verify'OR ${formmode}=='edit'" />
																</div>
																 
																<div class="col-4 col-sm-2"></div>
																<label class="col-4 col-sm-2">Bank Name <span
																	 
																	th:if="${formmode}=='add'">*</span></label>
																<div th:if="${formmode}=='add'" class="col-4 col-sm-2">
																	<input type="text" name="bank_name"
																		 
																		onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																		id="bankName" class="form-control form-control-sm  "
																		maxlength="25" autocomplete="off" required   />
																</div>
																<div class="col-4 col-sm-2"
																	th:if="${formmode}=='edit' OR ${formmode}=='verify' OR ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='delete'  ">
																	<input type="text" name="bank_name"
																		onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																		th:value="${userProfile?.bank_name}" id="bankName"
																		class="form-control form-control-sm  "
																		autocomplete="off" required
																		th:readonly="${userProfile?.entity_flg=='N'} OR ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='verify'OR ${formmode}=='edit'" />
																</div>
																<div class="col-4 col-sm-2"></div>
															</div>
															 
															<div class="form-row mt-2 ">
																<label class="col-4 col-sm-2">Branch Code <span
																	 
																	th:if="${formmode}=='add'">*</span></label>
																<div th:if="${formmode}=='add'" class="col-4 col-sm-2">
																	<input type="text" name="branch_code"
																		onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																		  id="branchCode" value=""
																		class="form-control form-control-sm  "
																		autocomplete="off" maxlength="4" required   />
																</div>
																<div class="col-4 col-sm-2"
																	th:if="${formmode}=='edit' OR ${formmode}=='verify' OR ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='delete'  ">
																	<input type="text" name="branch_code"
																		onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																		th:value="${userProfile?.branch_code}" id="branchCode"
																		value="" class="form-control form-control-sm  "
																		autocomplete="off" required
																		th:readonly="${userProfile?.entity_flg=='N'} OR ${formmode}=='view'  OR ${formmode}=='viewnew'  OR ${formmode}=='delete'   OR ${formmode}=='verify'OR ${formmode}=='edit'" />
																</div>
																<div class="col-4 col-sm-2"></div>
																<label class="col-4 col-sm-2">Branch Name <span
																	 
																	th:if="${formmode}=='add'">*</span></label>
																<div th:if="${formmode}=='add'" class="col-4 col-sm-2">
																	<input type="text" name="branch_name" id="branchName"
																		onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																		value="" class="form-control form-control-sm  "
																		maxlength="25" autocomplete="off" required   />
																</div>
																<div class="col-4 col-sm-2"
																	th:if="${formmode}=='edit' OR ${formmode}=='verify' OR ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='delete' ">
																	<input type="text" name="branch_name"
																		th:value="${userProfile?.branch_name}" id="branchName"
																		value="" class="form-control form-control-sm  "
																		autocomplete="off" required
																		th:readonly="${userProfile?.entity_flg=='N'} OR ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='verify'OR ${formmode}=='edit' OR ${formmode}=='delete'  " />
																</div>
																<div class="col-4 col-sm-2"></div>
															</div>
															 
															<div class="form-row mt-2 ">
																<label class="col-4 col-sm-2">Employee ID <span
																	 
																	th:if="${formmode}=='add'">*</span></label>
																<div th:if="${formmode}=='add'" class="col-4 col-sm-2">
																	<input type="text" name="empid" id="empId"  
																		onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																		maxlength="10"
																		value="" class="form-control form-control-sm  "
																		autocomplete="off" required />
																</div>
																<div class="col-4 col-sm-2"
																	th:if="${formmode}=='edit' OR ${formmode}=='verify' OR ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='delete'  ">
																	<input type="text" name="empid"
																		onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																		th:value="${userProfile?.empid}" id="empId" value=""
																		class="form-control form-control-sm  "
																		autocomplete="off" required
																		th:readonly="${userProfile?.entity_flg=='N'} OR ${formmode}=='view' OR ${formmode}=='viewnew'  OR ${formmode}=='verify'OR ${formmode}=='edit' OR ${formmode}=='delete'  " />
																</div>
																<div class="col-4 col-sm-2"></div>
																<label class="col-4 col-sm-2">Employee Name <span
																	 
																	th:if="${formmode}=='add'">*</span></label>
																<div th:if="${formmode}=='add'" class="col-4 col-sm-2">
																	<input type="text" name="emp_name" id="empName"
																		 
																		onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																		maxlength="50"
																		value="" class="form-control form-control-sm  "
																		required />
																</div>
																<div class="col-4 col-sm-2"
																	th:if="${formmode}=='edit' OR ${formmode}=='verify' OR ${formmode}=='view' OR ${formmode}=='viewnew'  OR ${formmode}=='delete'  ">
																	<input type="text" name="emp_name"
																		onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																		th:value="${userProfile?.emp_name}" id="empName"
																		value="" class="form-control form-control-sm  " required
																		autocomplete="off"
																		th:readonly="${userProfile?.entity_flg=='N'} OR ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='verify'OR ${formmode}=='edit' OR ${formmode}=='delete'  " />
																</div>
															</div>
															 
															<div class="form-row mt-2 ">
																<label class="col-4 col-sm-2">Mobile No <span
																	 
																	th:if="${formmode}=='add' OR ${formmode}=='edit'">*</span></label>
																<div th:if="${formmode}=='add'" class="col-4 col-sm-2">
																 
																	 
																		<input type="text" id="mobNo" name="mob_number"
																			th:if="${formmode}=='add'"
																			value="" class="form-control form-control-sm  "
																			maxlength="8"
																			oninput="this.value=this.value.replace(/[^0-9]/g,'');"
																			required autocomplete="off">
																  
																</div>
																<div class="col-4 col-sm-2"
																	th:if="${formmode}=='edit' OR ${formmode}=='verify' OR ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='delete' ">
																	<div class="input-group"
																		th:if=" ${formmode}=='verify' OR ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='delete' ">
																	
																		<input type="number" id="mobNo" name="mob_number"
																			class="form-control form-control-sm  " maxlength="8"
																			style="margin-left: -110px"
																			th:value="${userProfile?.mob_number}"
																			autocomplete="off" readonly>
																	</div>
																	<div class="input-group" th:if=" ${formmode}=='edit'">
																		 
																		<input type="number" id="mobNo" name="mob_number"
																			th:if=" ${formmode}=='edit'"
																			class="form-control form-control-sm  "
																			maxlength="8" th:value="${userProfile?.mob_number}"
																			autocomplete="off">
																	</div>
																	<span id="phoneNumber_Error"></span>
																</div>
																<div class="col-4 col-sm-2"></div>
																<label class="col-4 col-sm-2">Email ID <span
																	 
																	th:if="${formmode}=='add' OR ${formmode}=='edit'">*</span></label>
																<div th:if="${formmode}=='add'" class="col-4 col-sm-2">
																	<input type="email" name="email_id" id="emailId"
																		value=""
																		class="form-control form-control-sm  "
																		autocomplete="off" required
																		onkeyup="this.value = this.value.toUpperCase(); " />
																</div>
																<div class="col-4 col-sm-2"
																	th:if="${formmode}=='edit' OR ${formmode}=='verify' OR ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='delete'  ">
																	<input th:if="${formmode}!='edit'" type="email"
																		name="email_id" th:value="${userProfile?.email_id}"
																		id="emailId" value=""
																		class="form-control form-control-sm  "
																		autocomplete="off" required readonly /> <input
																		th:if="${formmode}=='edit'" type="email"
																		name="email_id" th:value="${userProfile?.email_id}"
																		id="emailId" value=""
																		class="form-control form-control-sm  "
																		autocomplete="off" required />
																</div>
															 
															</div>
															<div class="form-row mt-2 ">
																<label class="col-4 col-sm-2">Login Low <span
																	 
																	th:if="${formmode}=='add' OR ${formmode}=='edit'">*</span></label>
																<div th:if="${formmode}=='add'" class="col-4 col-sm-2">
																	<input type="time" name="login_low" id="loginLow1"
																		value="" class="form-control form-control-sm  "
																		autocomplete="off" required />
																</div>
																<div class="col-4 col-sm-2"
																	th:if="${formmode}=='edit' OR ${formmode}=='verify' OR ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='delete'  ">
																	<input type="time" name="login_low"
																		th:value="${userProfile?.login_low}" id="loginLow"
																		value="" class="form-control form-control-sm  "
																		autocomplete="off" required
																		th:readonly="${userProfile?.entity_flg=='N'} OR ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='delete'   OR ${formmode}=='verify' " />
																</div>
																<div class="col-4 col-sm-2"></div>
																<label class="col-4 col-sm-2">Login High <span
																	 
																	th:if="${formmode}=='add' OR ${formmode}=='edit'">*</span></label>
																<div th:if="${formmode}=='add'" class="col-4 col-sm-2">
																	<input type="time" name="login_high" id="loginHigh"
																		value="" class="form-control form-control-sm  "
																		autocomplete="off" required />
																</div>
																<div class="col-4 col-sm-2"
																	th:if="${formmode}=='edit' OR ${formmode}=='verify' OR ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='delete'  ">
																	<input type="time" name="login_high"
																		th:value="${userProfile?.login_high}" id="loginHigh"
																		value="" class="form-control form-control-sm  "
																		autocomplete="off"
																		th:readonly="${userProfile?.entity_flg=='N'} OR ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='delete'   OR ${formmode}=='verify' " />
																</div>
																<div class="col-4 col-sm-2"></div>
															</div>
															 
															<div class="form-row mt-2 ">
																<label class="col-4 col-sm-2">User Disable Date</label>
																<!-- <span  
											th:if="${formmode}=='add' OR ${formmode}=='edit'">*</span> -->
																<div th:if="${formmode}=='add'" class="col-4 col-sm-2">
																	<input type="text" name="disable_start_date"
																		id="disableDate" value=""
																		class="form-control form-control-sm  "
																		autocomplete="off" readonly />
																</div>
																<div class="col-4 col-sm-2"
																	th:if="${formmode}=='verify' OR ${formmode}=='view' OR ${formmode}=='edit' OR ${formmode}=='viewnew' OR ${formmode}=='delete'  ">
																	<input type="text" name="disable_start_date"
																		th:if="${formmode}=='edit'"
																		th:value="${#dates.format(userProfile?.disable_start_date, 'dd-MM-yyyy')}"
																		id="disableDate" class="form-control form-control-sm  "
																		autocomplete="off" readonly /> <input
																		type="text" name="disable_start_date"
																		th:if="${formmode}!='edit'"
																		th:value="${#dates.format(userProfile?.disable_start_date, 'dd-MM-yyyy')}"
																		class="form-control form-control-sm  "
																		autocomplete="off" readonly />
																</div>
																<div class="col-4 col-sm-2"></div>
																<label class="col-4 col-sm-2">User Disable Till Date</label>
																<div class="col-4 col-sm-2" th:if="${formmode}=='add'">
																	<input type="text" name="disable_end_date"
																		id="disableenddate" value=""
																		class="form-control form-control-sm  "
																		autocomplete="off" readonly />
																</div>
																<div class="col-4 col-sm-2"
																	th:if="${formmode}=='verify' OR ${formmode}=='view' OR ${formmode}=='edit' OR ${formmode}=='viewnew' OR ${formmode}=='delete'  ">
																	<input type="text" name="disable_end_date"
																		th:if="${formmode}=='edit'"
																		th:value="${#dates.format(userProfile?.disable_end_date, 'dd-MM-yyyy')}"
																		id="disableenddate"
																		class="form-control form-control-sm  "
																		autocomplete="off" readonly /> <input
																		type="text" name="disable_end_date"
																		th:if="${formmode}!='edit'" autocomplete="off"
																		th:value="${#dates.format(userProfile?.disable_end_date, 'dd-MM-yyyy')}"
																		class="form-control form-control-sm  " readonly />
																</div>
																<div class="col-4 col-sm-2"></div>
															</div>
															 
															<div class="form-row mt-2 ">
																<label class="col-4 col-sm-2">User Status</label>
																<div class="col-4 col-sm-2"
																	th:if="${formmode}=='add' OR ${formmode}=='edit'">
																	<input type="text" name="user_status" id="userStatus"
																		value="ACTIVE" th:if="${formmode}=='add'"
																		class="form-control form-control-sm  "
																		autocomplete="off" readonly /> <select
																		name="user_status" th:if="${formmode}=='edit'"
																		style="width: 100%" id="userStatus"
																		class="form-control form-control-sm  ">
																		<option
																			th:selected="${userProfile?.user_status}=='ACTIVE'"
																			value="ACTIVE">ACTIVE</option>
																		<option
																			th:selected="${userProfile?.user_status}=='INACTIVE'"
																			value="INACTIVE">INACTIVE</option>
																	</select>
																</div>
																<div class="col-4 col-sm-2"
																	th:if="${formmode}=='verify' OR ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='delete'  ">
																	<input type="text" name="user_status" id="userStatus"
																		th:value="${userProfile?.user_status}"
																		class="form-control form-control-sm  "
																		autocomplete="off" readonly />
																</div>
																<div class="col-4 col-sm-2"></div>
																<label class="col-4 col-sm-2">Login Status</label>
																<div class="col-4 col-sm-2"
																	th:if="${formmode}=='add' OR ${formmode}=='edit'">
																	<input type="text" th:if="${formmode}=='add'"
																		name="login_status" id="loginStatus" value="ACTIVE"
																		class="form-control form-control-sm  "
																		autocomplete="off" readonly /> <select
																		name="login_status" th:if="${formmode}=='edit'"
																		style="width: 100%" id="loginStatus"
																		class="form-control form-control-sm  ">
																		<option
																			th:selected="${userProfile?.login_status}=='ACTIVE'"
																			value="ACTIVE">ACTIVE</option>
																		<option
																			th:selected="${userProfile?.login_status}=='INACTIVE'"
																			value="INACTIVE">INACTIVE</option>
																	</select>
																</div>
																<div class="col-4 col-sm-2"
																	th:if="${formmode}=='verify' OR ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='delete'  ">
																	<input type="text" name="login_status" id="loginStatus"
																		th:value="${userProfile?.login_status}"
																		class="form-control form-control-sm  "
																		autocomplete="off" readonly />
																</div>
																<div class="col-4 col-sm-2"></div>
															</div>
															 
															<div class="form-row mt-2 ">
																<label class="col-4 col-sm-2">Account Expiry Date <span
																	 
																	th:if="${formmode}=='add' OR ${formmode}=='edit'">*</span></label>
																<div class="col-4 col-sm-2" th:if="${formmode}=='add'">
																	<input type="text" name="acc_exp_date" id="expiryDate"
																		autocomplete="off" value=""
																		class="form-control form-control-sm  " required readonly />
																</div>
																<div class="col-4 col-sm-2"
																	th:if="${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='verify'OR ${formmode}=='edit' OR ${formmode}=='delete'  ">
																	<input type="text" name="acc_exp_date"
																		autocomplete="off"
																		th:value="${#dates.format(userProfile?.acc_exp_date, 'dd-MM-yyyy')}"
																		id="expiryDate" th:if="${formmode}=='edit'"
																		class="form-control form-control-sm  " required readonly />
																	<input type="text" name="acc_exp_date" readonly
																		th:if="${formmode}!='edit'" autocomplete="off"
																		th:value="${#dates.format(userProfile?.acc_exp_date, 'dd-MM-yyyy')}"
																		class="form-control form-control-sm  " />
																</div>
																<input type="hidden" name="new_user_flg"
																	th:value="${userProfile?.new_user_flg}"
																	id="new_user_flg">
																<div class="col-4 col-sm-2"></div>
																<label class="col-4 col-sm-2">Remarks</label>
																<div class="col-4 col-sm-2" th:if="${formmode}=='add' ">
																	<input type="text" id="remarks" value="" name="remarks"
																		maxlength="50" autocomplete="off"
																		onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																		class="form-control form-control-sm  " />
																</div>
																<div class="col-4 col-sm-2"
																	th:if="${formmode}=='view' OR ${formmode}=='edit' OR ${formmode}=='viewnew' OR ${formmode}=='verify'OR ${formmode}=='delete'  ">
																	<input type="text" name="remarks" readonly
																		autocomplete="off" th:value="${userProfile?.remarks}"
																		id="remarks" maxlength="50"
																		class="form-control form-control-sm  " />
																	<!--<input type="text" name="remarks" autocomplete="off" th:value="${userProfile?.remarks}" id="remarks" maxlength="50" class="form-control form-control-sm  " />-->
																</div>
																<div class="col-4 col-sm-2"></div>
															</div>
										 			 
															<div class="form-row mt-2 ">
																<label class="col-4 col-sm-2">Role ID <span
																	 
																	th:if="${formmode}=='add' OR ${formmode}=='edit'">*</span></label>
																<div class="col-4 col-sm-2"
																	th:if="${formmode}=='view' OR ${formmode}=='viewnew'  OR ${formmode}=='verify'  OR ${formmode}=='delete'  ">
																	<input name="role_id"
																		th:value="${userProfile?.role_id}" autocomplete="off"
																		id="roleId" class="form-control form-control-sm  "
																		readonly>
																</div>
																<div class="col-4 col-sm-2" th:if="${formmode}=='add'">
																	<select name="role_id" th:value="${role_id}"
																		id="roleId" style="width: 100%"
																		class="form-control form-control-sm  "
																		onchange="roledesc();" required>
																		<option value="">SELECT</option>
																		<option id="role_id"
																			th:each="monitoringparam : ${RuleIDType}"
																			th:value="${monitoringparam}"
																			th:text="${monitoringparam}"></option>
																	</select>
																</div>
																<div class="col-4 col-sm-2" th:if="${formmode}=='edit'">
																	<select th:field="*{role_id}" name="role_id"
																		style="width: 100%" th:value="${userProfile?.role_id}"
																		id="roleId" class="form-control form-control-sm  "
																		onchange="roledesc1();">
																		<option value="">SELECT</option>
																		<option id="role_id"
																			th:each="monitoringparam : ${RuleIDType}"
																			th:value="${monitoringparam}"
																			th:text="${monitoringparam}"></option>
																	</select>
																</div>
																<div class="col-4 col-sm-2"></div>
																<label class="col-4 col-sm-2">Role Description</label>
																<div th:if="${formmode}=='add'" class="col-4 col-sm-2">
																	<input type="text" name="role_desc"
																		th:value="${role_desc}" autocomplete="off"
																		id="roleDesc" value=""
																		class="form-control form-control-sm  " readonly />
																</div>
																<div
																	th:if=" ${formmode}=='view' OR ${formmode}=='viewnew' OR ${formmode}=='verify' OR ${formmode}=='delete'    OR ${formmode}=='edit'"
																	class="col-4 col-sm-2">
																	<input type="text" name="role_desc" autocomplete="off"
																		th:value="${userProfile?.role_desc}" id="roleDesc1"
																		value="" class="form-control form-control-sm  " readonly />
																</div>
																<div class="col-4 col-sm-2"></div>
															</div>
															<div class="form-row mt-2  ">
																<div th:if="${formmode}=='add' OR ${formmode}=='edit'"
																	class="col-4 col-sm-2">
																	<label for="mand_account_number">Upload Image</label>
																</div>
																<div
																	th:if="(${formmode}=='verify'    OR ${formmode}=='view'  OR ${formmode}=='viewnew' OR ${formmode}=='delete') AND ${userProfile.photo}!=null"
																	class="col-4 col-sm-2">
																	<label for="mand_account_number">Upload Image</label>
																</div>
																<div th:if="${formmode}=='add'" class="col-4 col-sm-2">
																	<input type="file" id="file" name="file" class="form-control form-control-sm"
																		accept="image/png, image/jpeg">
																</div>
																<div th:if="${formmode}=='edit'" class="col-4 col-sm-2">
																	<input type="file" id="file" name="file"
																		accept="image/png, image/jpeg"> <span
																		th:if="${userProfile.photo}!=null" class=underline
																		onclick="clickPhoto(this);"
																		th:attr="data-userid=${userProfile.userid}"
																		title="click to view Image" id="openUploadModal">show</span>
																</div>
																<div
																	th:if=" (${formmode}=='verify'    OR ${formmode}=='view'  OR ${formmode}=='viewnew' OR ${formmode}=='delete') AND ${userProfile.photo}!=null"
																	class="col-4 col-sm-2">
																	<span class=underline onclick="clickPhoto(this);"
																		th:attr="data-userid=${userProfile.userid}"
																		title="click to view Image" id="openUploadModal">show
																		view</span>
																</div>
																<div class="col-4 col-sm-2"></div>
															</div>
														</div>

													</form>
												</div>
												<div class="card-footer text-center"
													style="font-family: 'Nunito', sans-serif; font-size: 23px; font-weight: 600; display: flex; justify-content: center; gap: 20px; width: 100%;">
													<button class="btn btn-primary btn-dark"
														Style="width: 150px; color: white;" type="button"
														id="Dashboard" onclick="contentLoad(this)">Home</button>
													<button class="btn btn-primary btn-dark"
														Style="width: 150px; color: white;" type="button"
														id="register" onclick="register_add(event)">Register</button>
													<button class="btn btn-primary btn-dark"
														Style="width: 150px; color: white;" id="btnback"
														onclick="list()">Back</button>

												</div>
											</div>
										</div>

										<div></div>
									</div>

								</div>

							</div>

						</div>
					</div>
				</div>
				<br>
				<!--<div class="container-fluid">
					<div class="card">
						<div class="card-body text-center">
							<div class="form-group ">
								<div class="container-fluid">
									<div class="row row-cols-2 row-cols-lg-3">
										<div class="col-4 col-sm-2">
											<label>Entry User:</label>
										</div>
										<div class="col-4 col-sm-2">
											<input type="text" th:if="${formmode}=='list'"
												class="form-control form-control-sm  " autocomplete="off"
												readonly  /> <input
												type="text" th:value="${session.USERID}"
												th:if="${formmode}=='add'"
												class="form-control form-control-sm  " autocomplete="off"
												readonly  />
										</div>
										<div class="col-4 col-sm-2">
											<label>Modify User:</label>
										</div>
										<div class="col-4 col-sm-2">
											<input type="text" th:if="${formmode}=='list'"
												class="form-control form-control-sm  " autocomplete="off"
												readonly  /> <input
												type="text" th:value="${session.USERID}"
												th:if="${formmode}=='add'"
												class="form-control form-control-sm  " autocomplete="off"
												readonly  />
										</div>
										<div class="col-4 col-sm-2">
											<label>Verify User:</label>
										</div>
										<div class="col-4 col-sm-2">
											<input type="text" th:if="${formmode}=='list'"
												class="form-control form-control-sm  " autocomplete="off"
												readonly  /> <input
												type="text" th:value="${session.USERID}"
												th:if="${formmode}=='add'"
												class="form-control form-control-sm  " autocomplete="off"
												readonly  />
										</div>
									</div>
									<div class="row row-cols-2 row-cols-lg-3">
										<div class="col-4 col-sm-2">
											<label>Entry Date:</label>
										</div>
										<div class="col-4 col-sm-2">
											<input type="text" th:if="${formmode}=='list'"
												class="form-control form-control-sm  " autocomplete="off"
												readonly  /> <input
												type="text" th:if="${formmode}=='add'"
												th:value="${#calendars.format(#calendars.createNow(), 'dd-MM-yyyy HH:mm')}"
												class="form-control form-control-sm  " autocomplete="off"
												readonly  />
										</div>
										<div class="col-4 col-sm-2">
											<label>Modify Date:</label>
										</div>
										<div class="col-4 col-sm-2">
											<input type="text" th:if="${formmode}=='list'"
												class="form-control form-control-sm  " autocomplete="off"
												readonly  /> <input
												type="text" th:if="${formmode}=='add'"
												th:value="${#calendars.format(#calendars.createNow(), 'dd-MM-yyyy HH:mm')}"
												class="form-control form-control-sm  " autocomplete="off"
												readonly  />
										</div>
										<div class="col-4 col-sm-2">
											<label>Verify Date:</label>
										</div>
										<div class="col-4 col-sm-2">
											<input type="text" th:if="${formmode}=='list'"
												class="form-control form-control-sm  " autocomplete="off"
												readonly  /> <input
												type="text" th:if="${formmode}=='add'"
												th:value="${#calendars.format(#calendars.createNow(), 'dd-MM-yyyy HH:mm')}"
												class="form-control form-control-sm  " autocomplete="off"
												readonly  />
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div align="right" style="margin-left: 870px; font-size: 18px">
						Status : <font style="color: #00cc00; font-size: 18px">ACTIVE</font>
					</div>
				</div>-->
			
			
			</div>
		</div>

    </div>
		<div class="modal fade" id="formmsg" data-backdrop="static"
			data-keyboard="false">
			<div
				class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
				<div class="modal-content">

					<div class="menu-title-header">
						<div class="modal-title" id="exampleModalLabel"
							style="text-align: center; color: white;">CIM FINANCE</div>
					</div>
					<div class="modal-body"
						style="margin-top: 8px; text-align: center; background-color: #c6ccd2">
						<button type="button" class="close" data-dismiss="modal">×</button>
						<a th:value="${msg}"></a>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary"
							onclick="submitformdelete(this);" th:attr="data-formmode=delete">Submit</button>
						<button type="button" class="btn btn-primary" data-dismiss="modal">Cancel</button>
					</div>
				</div>
			</div>
		</div>
		<div class="modal fade" id="alert">
			<div
				class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
				<div class="modal-content">
					<div class="menu-title-header">
						<div class="modal-title" id="exampleModalLabel"
							style="text-align: center; color: rgb(0, 0, 0);">USER
							PROFILE</div>
					</div>
					<div class="modal-body"
						style="text-align: center; background-color: #c6ccd2">
						<p id="alertmsg" style="font-size: 16px;">Added Successfully</p>
						<button type="button" class="btn btn-primary" data-dismiss="modal"
							onclick="back();">Close</button>
					</div>
				</div>
			</div>
		</div>
		<!-- Loading Modal -->
		<div id="loadingModal" style="display: none;">
			<div id="loadingContent">
				<img th:src=@{/images/infins.gif} alt="Loading...">
			</div>
		</div>

		<script> // BELOW IS FOR PASSWORD EXPIRE AFTER CURRENT DATE 
  const passExpDateInput = document.getElementById('passExpDate');
  const today = new Date().toISOString().split('T')[0]; // Get current date in YYYY-MM-DD format
  passExpDateInput.setAttribute('min', today);
</script>
</body>

</html>