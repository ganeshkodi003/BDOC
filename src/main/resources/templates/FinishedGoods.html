<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org" th:fragment="header"
	xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">

<link rel="stylesheet" type="text/css"
	href="/webjars/bootstrap/4.3.1/css/bootstrap.min.css"
	th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.min.css}">
<link rel="stylesheet" type="text/css"
	href="/webjars/font-awesome/5.9.0/css/all.min.css"
	th:href="@{/webjars/font-awesome/5.9.0/css/all.min.css}">
<link rel="stylesheet" type="text/css"
	href="/webjars/jquery-ui/1.12.1/jquery-ui.min.css"
	th:href="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.css}">
<link rel="stylesheet" type="text/css"
	href="/webjars/datatables/1.10.19/css/jquery.dataTables.min.css"
	th:href="@{/webjars/datatables/1.10.19/css/jquery.dataTables.min.css}">


<script src="/webjars/bootstrap/4.3.1/js/bootstrap.min.js"
	th:src="@{/webjars/bootstrap/4.3.1/js/bootstrap.min.js}"></script>
<script src="/webjars/popper.js/1.14.7/umd/popper.min.js"
	th:src="@{/webjars/popper.js/1.14.7/umd/popper.min.js}"></script>
<script src="/webjars/jquery/3.4.1/jquery.min.js"
	th:src="@{/webjars/jquery/3.4.1/jquery.min.js}"></script>
<script src="/webjars/jquery-ui/1.12.1/jquery-ui.min.js"
	th:src="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.js}"></script>
<script src="/webjars/datatables/1.10.19/js/jquery.dataTables.min.js"
	th:src="@{/webjars/datatables/1.10.19/js/jquery.dataTables.min.js}"></script>
<script
	src="/webjars/datatables/1.10.19/js/dataTables.bootstrap4.min.js"
	th:src="@{/webjars/datatables/1.10.19/js/dataTables.bootstrap4.min.js}"></script>


<link rel="stylesheet" type="text/css"
	href="webjars/chartjs/2.8.0/Chart.min.css"
	th:href="@{webjars/chartjs/2.8.0/Chart.min.css}">
<script src="webjars/chartjs/2.8.0/Chart.min.js"
	th:src="@{webjars/chartjs/2.8.0/Chart.min.js}"></script>

<link rel="shortcut icon" th:href="@{/favicon.ico}" type="image/x-icon">
<link rel="icon" th:href="@{/favicon.ico}" type="image/x-icon">

<link
	href="https://fonts.googleapis.com/css?family=Nunito:400,600|Open+Sans:400,600,700"
	rel="stylesheet">
<link rel="stylesheet" href="css/spur.css">


<title>ERP</title>

<style type="text/css">
.dash-nav-item {
	min-height: 20px;
	padding: 8px 10px 8px 8px;
	letter-spacing: .01em;
}

.dash-nav-dropdown-item {
	min-height: 10px;
	padding: 8px 10px 8px 10px;
}

td {
	background-color: #f8f7ff;
}

.dash-toolbar {
	min-height: 60px;
	background-color: #FFF;
}

.dash-nav.dash-nav-dark {
	background-color: #525252;
}

.img-container {
	text-align: center;
	display: block;
	margin-left: auto;
	margin-right: auto;
	text-align: center;
	display: table-cell;
	vertical-align: middle
}

.dash-app {
	margin-left: 380px ! important;
	margin-top: 110px;
	margin-right: 110px;
}

.card-title {
	margin-bottom: 0.25rem;
}

.card-header {
	padding: 0.25rem 0.25rem;
	margin-bottom: 0;
	border-bottom: 1px solid rgba(0, 0, 0, 0.125);
}

.dataTables_wrapper .dataTables_paginate .paginate_button {
	padding: 0px;
	margin: 20dp
}

.stats-secondary {
	color: #fff;
}

.menu-title-header {
	padding: 0.45rem 0.45rem;
	background: #727F94;
	color: #fff;
	font-family: "Nunito", sans-serif;
}

.spur-card-title {
	font-family: "Nunito", sans-serif;
	font-size: 25px;
}

.dataTables_wrapper .dataTables_paginate .paginate_button {
	box-sizing: border-box;
	display: inline-block;
	min-width: 1.5em;
	/* padding: 0.5em 1em; */
	margin-left: 2px;
	font-size: 15px;
	text-align: center;
	text-decoration: none !important;
	cursor: pointer;
	*cursor: hand;
	color: #d03535 !important;
	border-radius: 2px;
	height: 30px;
	text-align: center;
}

.dataTables_wrapper .dataTables_info, .dataTables_wrapper .dataTables_paginate
	{
	float: center;
	font-size: 15px;
	text-align: center;
	margin-left: 10px;
}

.table.dataTable thead th, table.dataTable thead td {
	padding: 10px 10px;
	font-weight: bold;
}

thead th {
	text-align: center;
	color: black !important;
	border-bottom-width: 2px;
	font-size: medium ! important;
}
</style>
<style type="text/css">
.navbar {
    margin-left: -5px;
    position: fixed; /* Keep it fixed */
    top: 0;
    width: 100%;
    z-index: 1000; /* Ensure it's above other elements */
}
.content {
    margin-top: 151px ! important; /* Push content down to avoid overlap */
}
.container-fluid {
    width: 100%;
    padding-right: 0px;
    padding-top:1px;
    padding-left: 15px;
    margin-right: auto;
    margin-left: auto;
}
.container-manager {
	padding-right: 47px;
	padding-left: 132px;
}
.row {
    display: -ms-flexbox;
    display: flex;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
    margin-right: -8px;
    margin-left: -22px;
}
</style>
<script type="text/javascript">
$(document).ready(function () {
    $('.dropdown, .dropdown-submenu').hover(function () {
        $(this).children('.dropdown-menu').stop(true, true).delay(200).fadeIn(200);
    }, function () {
        $(this).children('.dropdown-menu').stop(true, true).delay(200).fadeOut(200);
    });
});
</script>
<script type="text/javascript">
function select_branch() {
    const branchId = document.getElementById('branchId').value;

    $.ajax({
        url: './getbranch_fin?branchId=' + branchId,
        type: 'GET',
        dataType: 'json',
        success: function(response) {
            const tableBody = document.getElementById('dataTablesBody');
            tableBody.innerHTML = ''; // Clear existing data

            if (response.length === 0) {
                tableBody.innerHTML = `<tr><td colspan="5" style="text-align: center; color: red;">No records found.</td></tr>`;
            } else {
                response.forEach(item => {
                    let row = `<tr>
                        <td style="text-align: left;">${item.fgId}</td>
                        <td style="text-align: left;">${item.mfgProductName}</td>
                        <td style="text-align: left;">${item.baseUnit}</td>
                        <td style="text-align: right;">${parseFloat(item.usingQuantity).toFixed(3)}</td>
                        <td style="text-align: left;">${formatDate(item.createDate)}</td>
                    </tr>`;
                    tableBody.innerHTML += row;
                });
            }
        },
        error: function(xhr, status, error) {
            alert("Error: " + error);
        }
    });
}

// Helper function to format the date as 'dd-MM-yyyy'
function formatDate(dateString) {
    if (!dateString) return "";
    let date = new Date(dateString);
    let day = String(date.getDate()).padStart(2, '0');
    let month = String(date.getMonth() + 1).padStart(2, '0');
    let year = date.getFullYear();
    return `${day}-${month}-${year}`;
}
</script>


</head>

<style>
.spur-card-title {
	font-family: "Nunito", sans-serif;
	font-size: 25px;
}
</style>
<script>
$(document).ready(function () {
    $('#dataTables').DataTable({
        "pageLength": 20,        // Set the number of rows per page
        "lengthChange": false,   // Hide the dropdown for changing rows per page
        "ordering": false,       // Disable column sorting
        "searching": true,       // Enable global search
        "info": true,            // Show table information
        "pagingType": "simple_numbers", // Pagination with only numbers

        // Customizing DOM structure to place search box at the top left

        "dom": '<"top"f>rt<"bottom"ip><"clear">'
    });

    // Remove the "Search:" label and add a placeholder to the search input
    $('.dataTables_filter label').contents().filter(function () {
        return this.nodeType === Node.TEXT_NODE;
    }).remove(); // Remove the text node containing "Search:"

    // Add a placeholder to the input field
    $('.dataTables_filter input')
        .attr('placeholder', 'Search...')
        .css('margin-left', '0'); // Adjust margin since the label is removed

    // Align the search box to the left corner
    $('.dataTables_filter').css({
        "float": "left",
        "text-align": "left"
    });
});



</script>
<script>
    function searchTable(tableId, searchInputId) {
    var input = $('#' + searchInputId).val().toUpperCase();
    var $table = $('#' + tableId + ' tbody');
    var rows = $table.find('tr');

    rows.each(function () {
        var cells = $(this).find('td');
        var found = false;

        cells.each(function () {
            if ($(this).text().toUpperCase().indexOf(input) > -1) {
                found = true;
                return false; // Exit loop early
            }
        });

        if (found) {
            $(this).show();
        } else {
            $(this).hide();
        }
    });
}

   
    
    
</script>
<script>
function home(event) {
	event.preventDefault();
	location.href = 'Dashboard';
}
function back(event) {

	event.preventDefault();
	window.history.back();
}
</script>


<body>

	<div class="container-fluid">

		<div class="row">
			<!-- sideMenu -->

			<div class="col-lg-2">
				<div th:insert="BTMHeaderMenu :: header"></div>
			</div>
			<div class="col-sm-12">
				<!-- ------history--- -->


				<div class="container-fluid content" th:if="${formmode}=='sfglist'">
					<div class="row">
						<!-- Form for Journal Entry -->
						<form action="#" method="post" class="w-100"
							id="VendorRegistrationadd" autocomplete="off">
					<div class="card ">
					
						
						<div
									class="card-header d-flex justify-content-between align-items-center"
									style="font-family: 'Nunito', sans-serif; font-size: 1.5rem; font-weight: bold; color: black; padding-left:20px">
									<div>
										<h2><i class="fas fa-list mr-1"></i>Finished Goods List</h2>
									</div>
									<div class="d-flex align-items-center gap-4">
										<!-- Branch Selection -->
										<select class="btn btn-light btn-sm"
											onchange="select_branch();"
											style="color: black; font-weight: bold; border: 2px solid black; height: 32px; transform: translateX(-10px);"
											id="branchId" name="branchId">
											<option value="">Select Branch</option>
											<!-- Populate options dynamically using Thymeleaf -->
											<option th:each="branchId : ${branchIds}"
												th:value="${branchId}" th:text="${branchId}"></option>
										</select>
									</div>
								</div>
		
					<br>
					<div class="card-body">

									<div class="card-body" style="padding: 1rem;">
					<!-- Table -->
				
							
								
								<div class="table-responsive"
										style="overflow-y: auto; overflow-x: hidden; height: 85vh; border: 1px solid #dee2e6;">
							
							

								<div class="container-fluid">
									
									<!-- Table -->

									<div class="row">
										<div class="col-lg-12">
											
												<form method="post" autocomplete="off" id="addStockHistory"
													th:fragment="finuserapply">

													<div class="card-body" style="padding: 10px;">
											<!-- 			<div class="mb-3 d-flex justify-content-between align-items-center">
											<div>
												<input type="text" id="searchInput" placeholder="Search..."
													onkeyup="searchTable('dataTables', 'searchInput')"
													class="form-control" />
											</div>
										</div> -->
														
														<table id="dataTables"
															class="table table-bordered">
															<thead>
																<tr>
																	<th style="text-align: left;">Fg Id</th>
																	<th style="text-align: left;">Item Name</th>
																	<th style="text-align: left;">Base unit</th>
																	<th style="text-align: right;">Qty</th>
																	<th style="text-align: left;">Date</th>
																	

																</tr>
															</thead>
															<tbody id="dataTablesBody">
																<tr th:each="list : ${fglist}">
													
																	<td style="text-align: left;" th:text="${list.fgId}">SFG001</td>
																	<td style="text-align: left;" th:text="${list.mfgProductName}"></td>
																	<td style="text-align: left;" th:text="${list.baseUnit}"></td>
																	<td style="text-align: right;" th:text="${#numbers.formatDecimal(list.usingQuantity,1,3)}"></td>
																	<td style="text-align: left;" th:text="${#dates.format(list.createDate,'dd-MM-yyyy')}"></td>																	
																</tr>
															</tbody>
														</table>
													</div>
												</form>
											</div>
										</div>
									</div>
									</div>
									<div class="card-footer text-center" style="font-family: 'Nunito', sans-serif; font-size: 23px; font-weight: 600;">
									
										<button class="btn btn-xs btn-dark" type="button" id="Dashboard" onclick="home(event)">Home</button>
										
										<button class="btn btn-xs btn-dark" type="button" id="btnBack" onclick="back(event);">Back</button>
								
								</div>
								</div>

								
								
								
								</div>
							</div>
						</div>


					
				</div>



				
								

							</div>
						</div>
						</div>
						</div>
						
						
</body>

</html>