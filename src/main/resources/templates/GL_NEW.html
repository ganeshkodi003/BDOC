<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org" th:fragment="header"
	xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">

<link rel="stylesheet" type="text/css"
	href="/webjars/bootstrap/4.3.1/css/bootstrap.min.css"
	th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.min.css}">
<link rel="stylesheet" type="text/css"
	href="/webjars/font-awesome/5.9.0/css/all.min.css"
	th:href="@{/webjars/font-awesome/5.9.0/css/all.min.css}">
<link rel="stylesheet" type="text/css"
	href="/webjars/jquery-ui/1.12.1/jquery-ui.min.css"
	th:href="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.css}">
<link rel="stylesheet" type="text/css"
	href="/webjars/datatables/1.10.19/css/jquery.dataTables.min.css"
	th:href="@{/webjars/datatables/1.10.19/css/jquery.dataTables.min.css}">

<script src="/webjars/jquery-form/4.2.2/jquery.form.min.js"
	th:src="@{/webjars/jquery-form/4.2.2/jquery.form.min.js}"></script>

<script src="/webjars/jquery-validation/1.19.0/jquery.validate.min.js"
	th:src="@{/webjars/jquery-validation/1.19.0/jquery.validate.min.js}"></script>

<script src="/webjars/bootstrap/4.3.1/js/bootstrap.min.js"
	th:src="@{/webjars/bootstrap/4.3.1/js/bootstrap.min.js}"></script>
<script src="/webjars/popper.js/1.14.7/umd/popper.min.js"
	th:src="@{/webjars/popper.js/1.14.7/umd/popper.min.js}"></script>
<script src="/webjars/jquery/3.4.1/jquery.min.js"
	th:src="@{/webjars/jquery/3.4.1/jquery.min.js}"></script>
<script src="/webjars/jquery-ui/1.12.1/jquery-ui.min.js"
	th:src="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.js}"></script>
<script src="/webjars/datatables/1.10.19/js/jquery.dataTables.min.js"
	th:src="@{/webjars/datatables/1.10.19/js/jquery.dataTables.min.js}"></script>
<script
	src="/webjars/datatables/1.10.19/js/dataTables.bootstrap4.min.js"
	th:src="@{/webjars/datatables/1.10.19/js/dataTables.bootstrap4.min.js}"></script>

<link rel="stylesheet" type="text/css"
	href="webjars/chartjs/2.8.0/Chart.min.css"
	th:href="@{webjars/chartjs/2.8.0/Chart.min.css}">
<script src="webjars/chartjs/2.8.0/Chart.min.js"
	th:src="@{webjars/chartjs/2.8.0/Chart.min.js}"></script>

<link rel="shortcut icon" th:href="@{/favicon.ico}" type="image/x-icon">
<link rel="icon" th:href="@{/favicon.ico}" type="image/x-icon">

<link
	href="https://fonts.googleapis.com/css?family=Nunito:400,600|Open+Sans:400,600,700"
	rel="stylesheet">
<link rel="stylesheet" href="css/spur.css">


<title>ERP</title>
<style>
        .form-group {
            position: relative;
            margin-bottom: 1.5rem;
        }

        .form-control {
            width: 100%;
            border: 2px solid #ccc;
            border-radius: 8px;
            font-size: 1rem;
            outline: none;
            background: transparent;
            transition: border-color 0.3s ease, padding-top 0.3s ease;
        }
        .error {
    		color: red;
    		padding-top: 15px;
			}
        
        

        .form-control:focus {
            border-color: #007bff;
        }

        .form-legend {
            position: absolute;
            top: 50%;
            left: 15px;
            transform: translateY(-50%);
            font-size: 1rem;
            color: #aaa;
            background: white;
            padding: 0 5px;
            pointer-events: none;
            transition: 0.3s ease;
        }

        /* When input or select is focused or has a value, move the label up */
        .form-control:focus ~ .form-legend,
        .form-control:not(:placeholder-shown) ~ .form-legend {
            top: -8px;
            font-size: 1rem;
            color: #007bff;
        }

        /* Hover effect when the input/select is focused */
        .form-control:focus:hover ~ .form-legend {
            color: #0056b3; /* Darker shade of blue on hover */
        }

        /* Ensure the label returns to the normal color after focus or hover is removed */
        .form-control:not(:focus) ~ .form-legend {
            color: #aaa; /* Normal label color */
        }
    </style>
<style type="text/css">
.dash-nav-item {
	min-height: 20px;
	padding: 8px 10px 8px 8px;
	letter-spacing: .01em;
}

.dash-nav-dropdown-item {
	min-height: 10px;
	padding: 8px 10px 8px 10px;
}

td {
	background-color: #f8f7ff;
}

.dash-toolbar {
	min-height: 60px;
	background-color: #FFF;
}

.dash-nav.dash-nav-dark {
	background-color: #525252;
}

.img-container {
	text-align: center;
	display: block;
	margin-left: auto;
	margin-right: auto;
	text-align: center;
	display: table-cell;
	vertical-align: middle
}

.card-title {
	margin-bottom: 0.25rem;
}

.card-header {
	padding: 0.25rem 0.25rem;
	margin-bottom: 0;
	border-bottom: 1px solid rgba(0, 0, 0, 0.125);
}

.dataTables_wrapper .dataTables_paginate .paginate_button {
	padding: 0px;
	margin: 20dp
}

.menu-title-header {
	padding: 0.45rem 0.45rem;
	background: #727F94;
	color: #fff;
	font-family: "Nunito", sans-serif;
}

.spur-card-title {
	font-family: "Nunito", sans-serif;
	font-size: 25px;
}

.dataTables_wrapper .dataTables_paginate .paginate_button {
	box-sizing: border-box;
	display: inline-block;
	min-width: 1.5em;
	/* padding: 0.5em 1em; */
	margin-left: 2px;
	font-size: 15px;
	text-align: center;
	text-decoration: none !important;
	cursor: pointer;
	*cursor: hand;
	color: #d03535 !important;
	border-radius: 2px;
	height: 30px;
	text-align: center;
}

.dataTables_wrapper .dataTables_info, .dataTables_wrapper .dataTables_paginate
	{
	float: none;
	font-size: 15px;
	text-align: center;
	margin-left: 10px;
}

.table.dataTable thead th, table.dataTable thead td {
	padding: 10px 10px;
	font-weight: normal;
}

.btn-secondary.active {
	background-color: blue !important;
	/* Darker shade to indicate active state */
	color: white;
	text-decoration: underline;
}
</style>
<script>
function payinview(a){
	var Opid=a.getAttribute('data-wid');
	alert(Opid)
	location.href='./GL_NEW?formmode=payinview&Opid='+Opid ;
}
function payoutview(a){
	var Opid=a.getAttribute('data-Opid');
	alert(Opid)
	location.href='./GL_NEW?formmode=payoutview&Opid='+Opid ;
}
function POlists(a){
	var Opid=a.getAttribute('data-Opid');
	alert(Opid)
	location.href='./GL_NEW?formmode=POlist&Opid='+Opid ;
}
function POview(a){
	var Opid=a.getAttribute('data-Opid');
	alert(Opid)
	location.href='./GL_NEW?formmode=POview&Opid='+Opid ;
}
function Saleview(a){
	var Opid=a.getAttribute('data-Opid');
	alert(Opid)
	location.href='./GL_NEW?formmode=Saleview&Opid='+Opid ;
}
	
function Purchase_Invoice(id){
//alert(id)
location.href='./Purchase_Invoice?id=' + id;
}


function back(event) {

	event.preventDefault();
	window.history.back();
}

function add(event){
event.preventDefault();
	
	location.href='./purchaseOrder?';

}

function POlist(event){
	event.preventDefault();
		location.href='./Inventory_po';

	}

function registrationlist(event){
	location.href='./VendorCreation';
}
</script>

<script th:inline="javascript">
document.addEventListener('DOMContentLoaded', () => {
    // Event listener for the Add Row button
    document.getElementById("addRowBtn").addEventListener("click", function (e) {
        // Prevent the default behavior
        e.preventDefault();

        // Fetch the ItemList passed from Thymeleaf into JavaScript
        var itemList = /*[[${ItemList}]]*/ [];

        // Dynamically build the datalist options using the ItemList
        let datalistOptions = '';
        itemList.forEach(item => {
            // Assuming item.itemCode is what you want to display in the datalist
            datalistOptions += `<option value="${item.itemCode}" />`;
        });

        // Get the table body element where rows will be added
        const table = document.getElementById("itemTable").getElementsByTagName("tbody")[0];
        const rowCount = table.rows.length;  // Get current row count
        const newRow = table.insertRow(rowCount);  // Insert a new row

        // Add the new row with dynamic content
        newRow.innerHTML = `
            <td>${rowCount + 1}</td>
            <td>
                <input type="text" class="form-control" name="itemcode" placeholder="Code" list="itemList${rowCount + 1}" onchange="product_name_typeFunction1(this)">
                <datalist id="itemList${rowCount + 1}">
                    ${datalistOptions} <!-- Dynamically added options -->
                </datalist>
            </td>
            <td><input type="text" class="form-control" name="item" id="item" placeholder="Item"></td>
            <td><input type="number" class="form-control" name="qty" id="qty" placeholder=" Qty"></td>
            <td>
                <select class="form-control" name="unit" id="unit">
                    <option value="NONE">NONE</option>
                    <option value="BAGS">BAGS</option>
                    <option value="BOTTLES_BTL">BOTTLES (BTL)</option>
                    <option value="BOX">BOX</option>
                    <option value="BUNDLES_BDL">BUNDLES (BDL)</option>
                    <option value="CANS">CANS (CAN)</option>
                    <option value="CARTONS">CARTONS (CTN)</option>
                    <option value="DOZENS">DOZENS (DZN)</option>
                    <option value="GRAMMES">GRAMMES (GM)</option>
                    <option value="KILOGRAMS">KILOGRAMS (KG)</option>
                    <option value="LITRES">LITRES (LTR)</option>
                    <option value="METERS">METERS (MTR)</option>
                    <option value="MILILITRE">MILILITRE (ML)</option>
                    <option value="NUMBERS">NUMBERS (NOS)</option>
                    <option value="PACKS">PACKS (PAC)</option>
                    <option value="PAIRS">PAIRS (PRS)</option>
                    <option value="PIECES">PIECES (PCS)</option>
                    <option value="QUINTAL">QUINTAL (QTL)</option>
                    <option value="ROLLS">ROLLS (ROL)</option>
                    <option value="SQUARE_FEET">SQUARE FEET (SQF)</option>
                    <option value="SQUARE_METERS">SQUARE METERS (SQM)</option>
                    <option value="TABLETS">TABLETS (TBS)</option>
                </select>
            </td>
            <td><input type="text" class="form-control" name="price" id="price" placeholder="Price"></td>
            <td>
                <select class="form-control form-control-sm mt-1" id="taxPercentage" name="taxPercentage" style="background-color: #F5F5F5 !important;">
                    <option value="NONE">NONE</option>
                    <option value="IGST@0%">IGST@0%</option>
                    <option value="CGST@0%">CGST@0%</option>
                    <option value="SGST@0%">SGST@0%</option>
                    <option value="IGST@0.25%">IGST@0.25%</option>
                    <option value="CGST@0.25%">CGST@0.25%</option>
                    <option value="SGST@0.25%">SGST@0.25%</option>
                    <option value="IGST@3%">IGST@3%</option>
                    <option value="CGST@3%">CGST@3%</option>
                    <option value="SGST@3%">SGST@3%</option>
                    <option value="IGST@5%">IGST@5%</option>
                    <option value="CGST@5%">CGST@5%</option>
                    <option value="SGST@5%">SGST@5%</option>
                    <option value="IGST@12%">IGST@12%</option>
                    <option value="CGST@12%">CGST@12%</option>
                    <option value="SGST@12%">SGST@12%</option>
                    <option value="IGST@18%">IGST@18%</option>
                    <option value="CGST@18%">CGST@18%</option>
                    <option value="SGST@18%">SGST@18%</option>
                    <option value="IGST@28%">IGST@28%</option>
                    <option value="CGST@28%">CGST@28%</option>
                    <option value="SGST@28%">SGST@28%</option>
                    <option value="EXEMPT">EXEMPT</option>
                </select>
            </td>
            <td><input type="text" class="form-control" name="taxAmount" id="taxAmount" placeholder="Tax Amount"></td>
            <td><input type="text" class="form-control" name="amountPerItem" id="amountPerItem" placeholder="Amount"></td>
            <td><button class="btn btn-danger btn-sm remove-row">-</button></td>
        `; 
        updateTotals();
    });
});

// Remove Row Functionality
document.addEventListener("click", function (e) {
    if (e.target && e.target.classList.contains("remove-row")) {
        const row = e.target.closest("tr");
        row.remove();
        updateTotals();
    }
});
</script>


<script>

document.addEventListener('DOMContentLoaded', () => {
	
	document.getElementById("paymentType").addEventListener("change", function () {
	    const paymentType = this.value;

	    // Reset visibility for fields
	    document.getElementById("cashField").style.display = "none";
	    document.getElementById("chequeField").style.display = "none";

	    // Show relevant fields based on the selected payment type
	    if (paymentType === "cash") {
	        document.getElementById("cashField").style.display = "block";
	    } else if (paymentType === "cheque") {
	        document.getElementById("cashField").style.display = "block"; // Show Amount field
	        document.getElementById("chequeField").style.display = "block"; // Show Reference Number field
	    }
	});

	// Dynamic Balance Calculation
	document.getElementById("advanceAmount").addEventListener("input", function () {
	    const total = parseFloat(document.getElementById("total").value) || 0;
	    const advance = parseFloat(this.value) || 0;
	    const balance = total - advance;
	    document.getElementById("balance").value = balance.toFixed(2);
	});


});
</script>

<script>

function product_name_typeFunction1(input) {
    const row = input.closest('tr');
    const code = input.value;
   
    const item = row.querySelector('input[name="item"]');
    const qty = row.querySelector('input[name="qty"]');
    const unit = row.querySelector('select[name="unit"]');
    const price = row.querySelector('input[name="price"]');
    const taxPercentage = row.querySelector('select[name="taxPercentage"]');
    const taxAmount = row.querySelector('input[name="taxAmount"]');
    const amountPerItem = row.querySelector('input[name="amountPerItem"]');
    //alert(code);
    $.ajax({
        url: "./getitemdetails?code=" + encodeURIComponent(code),
        type: 'GET',
        dataType: "json",
        success: function(res) {
        	
            $.each(res, function(index, data) {
                const values = Object.values(data);
                item.value = values[0];
                amountPerItem.value = values[13];
                qty.value = values[15];
                price.value = values[18];
                taxPercentage.value = values[25];
                unit.value = values[3];
             // Normalize and check the value
                const headerValue = values[7].trim().toLowerCase();
              
                    document.getElementById('priceHeader').value = headerValue;
                
            }); calculateTax(input);
            updateTotals();
        }
    });
   
}
</script>


<script>
function calculateTax(input) {
    // Get the row where the input or selection was triggered
    const row = input.closest('tr');

    // Get references to the price, tax percentage, and tax amount fields
    const priceField = row.querySelector('#price');
    const taxPercentageField = row.querySelector('#taxPercentage');
    const taxAmountField = row.querySelector('#taxAmount');

    // Parse price value
    const price = parseFloat(priceField.value) || 0;

    // Extract numeric value from the selected tax percentage option
    const taxPercentageMatch = taxPercentageField.value.match(/[\d.]+/);
    const taxPercentage = taxPercentageMatch ? parseFloat(taxPercentageMatch[0]) : 0;

    // Calculate the tax amount
    const taxAmount = (price * taxPercentage) / 100;

    // Update the taxAmount field
    taxAmountField.value = price > 0 ? taxAmount.toFixed(2) : '';
}


function updateTotals() {
    // Get all rows in the table body
    const rows = document.querySelectorAll('tbody tr');

    let totalQty = 0;
    let totalAmount = 0;

    // Loop through each row and sum up the values
    rows.forEach(row => {
        // Get the quantity and amount fields in the current row
        const qtyField = row.querySelector('#qty');
        const amountField = row.querySelector('#amountPerItem');

        // Parse the values as numbers, default to 0 if invalid
        const qty = parseFloat(qtyField?.value) || 0;
        const amount = parseFloat(amountField?.value) || 0;

        // Add to the totals
        totalQty += qty;
        totalAmount += amount;
    });

    // Update the footer fields
    document.querySelector('#totalQty').value = totalQty.toFixed(2);
    document.querySelector('#totalAmount').value = totalAmount.toFixed(2);
    document.getElementById('totalAmounts').value = totalAmount.toFixed(2);

}


</script>
<script>
// Function to update the balance
function updateBalance() {
    // Get the total amount and advance amount
    const totalAmount = parseFloat(document.getElementById('totalAmounts').value) || 0;
    const advanceAmount = parseFloat(document.getElementById('advanceAmount').value) || 0;

    // Calculate the balance (total - advance)
    const balanceAmount = totalAmount - advanceAmount;

    // Update the balance field
    document.getElementById('balanceAmount').value = balanceAmount.toFixed(2); // Format with 2 decimal places
    
    const av = parseFloat(document.getElementById('advanceAmount').value) || 0;
    document.getElementById('paidAmount').value = av.toFixed(2); 
}



document.addEventListener('DOMContentLoaded', () => {
// Optionally, if you want to trigger the balance calculation when the total amount changes
document.getElementById('advanceAmount').addEventListener('input', updateBalance);
});

</script>


<script>
// Add event listener after DOM is loaded with an anonymous function
document.addEventListener('DOMContentLoaded', () => {
    document.getElementById('paidAmount').addEventListener('input', function() {
        const paidAmount = parseFloat(document.getElementById('paidAmount').value) || 0;
        document.getElementById('advanceAmount').value = paidAmount.toFixed(2); 
        
        const totalAmount = parseFloat(document.getElementById('totalAmounts').value) || 0;
        const advanceAmount = parseFloat(document.getElementById('advanceAmount').value) || 0;

        // Calculate the balance (total - advance)
        const balanceAmount = totalAmount - advanceAmount;

        // Update the balance field
        document.getElementById('balanceAmount').value = balanceAmount.toFixed(2);
        
        
    });
});
</script>

<script>
function poSubmit(event) {

    let productList = []; // Changed var to let for better scoping
    const vendorId = document.getElementById('vendorId').value || 0;
	
    const orderDate = document.getElementById('orderDate').value || 0;
    const dueDate = document.getElementById('dueDate').value || 0;
    const priceHeader = document.getElementById('priceHeader').value || 0;
    const totalAmount = document.getElementById('totalAmounts').value || 0;
    const totalQty = document.getElementById('totalQty').value || 0;
    const paymentType = document.getElementById('paymentType').value || 0;
    const paidAmount = document.getElementById('paidAmount').value ? parseFloat(document.getElementById('paidAmount').value) : 0;
    const referenceNumber = document.getElementById('referenceNumber').value || 0;
    const advanceAmount = document.getElementById('advanceAmount').value || 0;
    const balanceAmount = document.getElementById('balanceAmount').value || 0;


    // Iterate through each row in the item table to gather item data
    $('#itemTable tbody tr').each(function(index) {
        const row = $(this);

        const itemCode = row.find('input[name="itemcode"]').val();
        const item = row.find('input[name="item"]').val();
        const qty = row.find('input[name="qty"]').val();
        const unit = row.find('select[name="unit"]').val();
        const price = row.find('input[name="price"]').val();
        const taxPercentage = row.find('select[name="taxPercentage"]').val();
        const taxAmount = row.find('input[name="taxAmount"]').val();
        const amountPerItem = row.find('input[name="amountPerItem"]').val();

        // Log row data for debugging
        console.log("Processing row " + index);
        console.log({
            itemCode,
            item,
            qty,
            unit,
            price,
            taxPercentage,
            taxAmount,
            amountPerItem
        });

        // Only push rows with complete data into productList
        if (itemCode && item && qty && unit && price && taxPercentage && taxAmount && amountPerItem) {
            const listItem = {
                itemCode,
                item,
                qty,
                unit,
                price,
                taxPercentage,
                taxAmount,
                amountPerItem,

                // Including common data fields
                vendorId,
                orderDate,
                dueDate,
                priceHeader,
                totalAmount,
                totalQty,
                paymentType,
                paidAmount,
                referenceNumber,
                advanceAmount,
                balanceAmount
            };
            productList.push(listItem);
        } else {
            console.warn(`Row ${index} is missing data and will be skipped.`);
        }
    });

    // Proceed only if there is data to send
    if (productList.length > 0) {
        $.ajax({
            type: 'POST',
            url: './AddPo?formmode=add',
            contentType: 'application/json',
            data: JSON.stringify(productList),
            success: function(response) {
                alert(response);
            	window.history.back();
            },
            error: function(xhr, status, error) {
                console.error("AJAX error:", status, error);
                alert("An error occurred while sending the data.");
            }
        });
    } else {
        alert("No data to send.");
    }
}



</script>

<script>
    // Function to calculate and display the total amount
    function calculateTotalAmount() {
        let total = 0;
        // Get all cells with the class "total-amount"
        const amounts = document.querySelectorAll('.total-amount');
        amounts.forEach(cell => {
            const value = parseFloat(cell.textContent.trim());
            if (!isNaN(value)) {
                total += value;
            }
        });
        // Update the footer with the total
        document.getElementById('totalAmount').textContent = total.toFixed(2);
    }

    // Call the function after the page loads
    window.onload = calculateTotalAmount;
</script>

<script>

document.addEventListener('DOMContentLoaded', () => {
    calculateTotal('payintablebody', 'payin-total');
});

function calculateTotal(tbodyId, totalCellId) {
    const tbody = document.getElementById(tbodyId);
    const totalCell = document.getElementById(totalCellId);
    let totalAmount = 0;

    // Loop through rows and sum up the amounts
    Array.from(tbody.querySelectorAll('tr')).forEach(row => {
        const amountCell = row.cells[5]; // 5th column for "Received Amount"
        if (amountCell && !isNaN(parseFloat(amountCell.textContent))) {
            totalAmount += parseFloat(amountCell.textContent.trim());
        }
    });

    // Update the total cell
    totalCell.textContent = totalAmount.toFixed(2);
}



document.addEventListener('DOMContentLoaded', () => {
    calculateTotalone('payouttablebody', 'payout-total');
});

function calculateTotalone(tbodyId, totalCellId) {
    const tbody = document.getElementById(tbodyId);
    const totalCell = document.getElementById(totalCellId);
    let totalAmount = 0;

    // Loop through rows and sum up the amounts
    Array.from(tbody.querySelectorAll('tr')).forEach(row => {
        const amountCell = row.cells[5]; // 5th column for "Received Amount"
        if (amountCell && !isNaN(parseFloat(amountCell.textContent))) {
            totalAmount += parseFloat(amountCell.textContent.trim());
        }
    });

    // Update the total cell
    totalCell.textContent = totalAmount.toFixed(2);
}


document.addEventListener('DOMContentLoaded', () => {
	calculateTotalsale('SaletableBody', 'sale-total');
});

function calculateTotalsale(tbodyId, totalCellId) {
    const tbody = document.getElementById(tbodyId);
    const totalCell = document.getElementById(totalCellId);
    let totalAmount = 0;

    // Loop through rows and sum up the amounts
    Array.from(tbody.querySelectorAll('tr')).forEach(row => {
        const amountCell = row.cells[6]; // 5th column for "Received Amount"
        if (amountCell && !isNaN(parseFloat(amountCell.textContent))) {
            totalAmount += parseFloat(amountCell.textContent.trim());
        }
    });

    // Update the total cell
    totalCell.textContent = totalAmount.toFixed(2);
}


document.addEventListener('DOMContentLoaded', () => {
	calculateTotalpo('POtableBody', 'po-total');
});

function calculateTotalpo(tbodyId, totalCellId) {
    const tbody = document.getElementById(tbodyId);
    const totalCell = document.getElementById(totalCellId);
    let totalAmount = 0;

    // Loop through rows and sum up the amounts
    Array.from(tbody.querySelectorAll('tr')).forEach(row => {
        const amountCell = row.cells[6]; // 5th column for "Received Amount"
        if (amountCell && !isNaN(parseFloat(amountCell.textContent))) {
            totalAmount += parseFloat(amountCell.textContent.trim());
        }
    });

    // Update the total cell
    totalCell.textContent = totalAmount.toFixed(2);
}
</script>

</head>

<body>
	<div class="container-fluid">
		<div class="row">
			<div class="col-sm-2">
				<div th:insert="BTMHeaderMenu :: header"></div>
			</div>
			<div class="col-sm-10">



				<!--------------------------------------------Vendor List start ----------------------------------------------->

				<div class="container-fluid content" th:if="${formmode}=='list'">
					<div class="row">
						<!-- Form for Journal Entry -->
						<form action="#" method="post" class="w-100"
							id="VendorRegistrationadd" autocomplete="off">
							<div class="card">
								<!-- Form Header -->
								<div
									class="card-header d-flex justify-content-between align-items-center"
									style="font-family: 'Nunito', sans-serif; font-size: 1.5rem; font-weight: bold; color: black;">
									<div>
										<i class="fas fa-list mr-1"></i> General Ledger
									</div>
									<div></div>
								</div>

								<div class="card-body">

									<div class="card-body" style="padding: 1rem;">
										<!-- Search Input -->
										<div
											class="mb-3 d-flex justify-content-between align-items-center">
											<div>
												<input type="text" id="searchInput" placeholder="Search..."
													onkeyup="searchTable('dataTables', 'searchInput')"
													class="form-control" />
											</div>
										</div>

										<!-- Table for displaying journal entries -->
										<table id="dataTables" class="table table-striped">
											<thead>
												<tr>
													<th style="text-align: center;">Vendor Id</th>
													<th style="text-align: center;">Vendor Name</th>
													<th style="text-align: center;">Mobile No</th>
													<th style="text-align: center;">Vendor Type</th>
													<th style="text-align: center;">E-mail</th>
													<th style="text-align: center;">Pending Amount</th>
													<th style="text-align: center;">Balance Amount</th>
													<th style="text-align: center;">View</th>
												</tr>
											</thead>
											<tbody id="tableBody">
												<tr th:if="${#lists.isEmpty(vendorlist)}">
													<td colspan="8" style="text-align: center; color: red;">
														No records found.</td>
												</tr>
												<tr th:each="vendor : ${vendorlist}">
													<td th:text="${vendor.vendorId}"
														style="text-align: center;"></td>
													<td th:text="${vendor.vendorName}"
														style="text-align: center;"></td>
													<td th:text="${vendor.mobileNo}"
														style="text-align: center;"></td>
													<td th:text="${vendor.vendorType}"
														style="text-align: center;"></td>
													<td th:text="${vendor.emailid}" style="text-align: center;"></td>
													<td th:text="${vendor.advanceamount}"
														style="text-align: center;"></td>
													<td th:text="${vendor.balanceamount}"
														style="text-align: center;"></td>
													<td style="text-align: center;"><input type="radio"
														name="PIradio" id="PIradio"
														th:attr="data-Opid=${vendor.vendorId}"
														onclick="POlists(this)" value="yourValue"></td>
												</tr>
											</tbody>

										</table>


										<div id="pagination-controls"></div>
									</div>





									<!-- Form Footer -->
									<div class="card-footer text-center"
										style="font-family: 'Nunito', sans-serif; font-size: 23px; font-weight: 600;">
										<button class="btn btn-xs btn-dark" type="button"
											id="Dashboard" onclick="Home()">Home</button>


										<button class="btn btn-xs btn-dark" id="btnback"
											onclick="back(event)">Back</button>
									</div>
								</div>
							</div>
						</form>
					</div>
				</div>

<!--------------------------------------------All List start ----------------------------------------------->

				<div class="container-fluid content" th:if="${formmode}=='Alllist'">
					<div class="row">
						<!-- Form for Journal Entry -->
						<form action="#" method="post" class="w-100"
							id="VendorRegistrationadd" autocomplete="off">
							<div class="card">
								<!-- Form Header -->
								<div
									class="card-header d-flex justify-content-between align-items-center"
									style="font-family: 'Nunito', sans-serif; font-size: 1.5rem; font-weight: bold; color: black;">
									<div>
										<i class="fas fa-list mr-1"></i> Ledger - List
									</div>
									<div></div>
								</div>
<!--------------------------------------------PO List start ----------------------------------------------->

								<div class="card-body">
								<div>
										<h4>List Of Purchase</h4> 
									</div>
									<div class="card-body" style="padding: 1rem;">
										<!-- Search Input -->
										<div
											class="mb-3 d-flex justify-content-between align-items-center">
											<div>
												<input type="text" id="searchInput" placeholder="Search..."
													onkeyup="searchTable('dataTables', 'searchInput')"
													class="form-control" />
											</div>
										</div>

										<!-- Table for displaying journal entries -->
										<table id="POtable" class="table table-striped">
											<thead>
												<tr>
													<th style="text-align: center;">PO Id</th>
													<th style="text-align: center;">Vendor Id</th>
													<th style="text-align: center;">Item</th>
													<th style="text-align: center;">Order Date</th>
													<th style="text-align: center;">Qty</th>
													<th style="text-align: center;">Units</th>
													<th style="text-align: center;">Total Amount</th>
													<th style="text-align: center;">View</th>
												</tr>
											</thead>
											<tbody id="POtableBody">
												<tr th:if="${#lists.isEmpty(getpolist)}">
													<td colspan="8" style="text-align: center; color: red;">
														No records found.</td>
												</tr>
												<tr th:each="vendor : ${getpolist}">
													<td th:text="${vendor.poId}" style="text-align: center;"></td>
													<td th:text="${vendor.vendorId}"
														style="text-align: center;"></td>
													<td th:text="${vendor.item}" style="text-align: center;"></td>
													<td style="text-align: center;"
														th:text="${vendor.orderDate != null ? #dates.format(vendor.orderDate, 'dd-MM-yyyy') : ''}">
													</td>

													<td th:text="${vendor.qty}" style="text-align: center;"></td>
													<td th:text="${vendor.unit}" style="text-align: center;"></td>
													<td class="total-amount" th:text="${vendor.totalAmount}"
														style="text-align: center;"></td>
													<td style="text-align: center;"><input type="radio"
														name="PIradio" id="PIradio"
														th:attr="data-Opid=${vendor.poId}"
														onclick="POview(this)" value="yourValue"></td>
												</tr>
											</tbody>
 <tfoot>
        <tr>
            <td colspan="6" style="text-align: right; font-weight: bold;">Total:</td>
            <td id="po-total" style="text-align: center; font-weight: bold; color:red;"></td>
            <td></td>
        </tr>
    </tfoot>
										</table>


										<div id="pagination-controls"></div>
									</div>


								</div>

<!------------------------------------- sale List-------------------------------  -->

									
									<div class="card-body">
								<div>
										<h4>List Of Sale</h4> 
									</div>
									<div class="card-body" style="padding: 1rem;">
										<!-- Search Input -->
										<div
											class="mb-3 d-flex justify-content-between align-items-center">
											<div>
												<input type="text" id="searchInput" placeholder="Search..."
													onkeyup="searchTable('dataTables', 'searchInput')"
													class="form-control" />
											</div>
										</div>

										<!-- Table for displaying journal entries -->
										<table id="Saletable" class="table table-striped">
											<thead>
												<tr>
													<th style="text-align: center;">WO Id</th>
													<th style="text-align: center;">Vendor Id</th>
													<th style="text-align: center;">Item</th>
													<th style="text-align: center;">Order Date</th>
													<th style="text-align: center;">Qty</th>
													<th style="text-align: center;">Units</th>
													<th style="text-align: center;">Total Amount</th>
													<th style="text-align: center;">View</th>
												</tr>
											</thead>
											<tbody id="SaletableBody">
												<tr th:if="${#lists.isEmpty(getsalelist)}">
													<td colspan="8" style="text-align: center; color: red;">
														No records found.</td>
												</tr>
												<tr th:each="vendor : ${getsalelist}">
													<td th:text="${vendor.woId}" style="text-align: center;"></td>
													<td th:text="${vendor.vendorId}"
														style="text-align: center;"></td>
													<td th:text="${vendor.item}" style="text-align: center;"></td>
													<td style="text-align: center;"
														th:text="${vendor.orderDate != null ? #dates.format(vendor.orderDate, 'dd-MM-yyyy') : ''}">
													</td>
													<td th:text="${vendor.qty}" style="text-align: center;"></td>
													<td th:text="${vendor.unit}" style="text-align: center;"></td>
													<td class="total-amount" th:text="${vendor.totalAmount}"
														style="text-align: center;"></td>
													<td style="text-align: center;"><input type="radio"
														name="PIradio" id="PIradio"
														th:attr="data-Opid=${vendor.woId}"
														onclick="Saleview(this)" ></td>
												</tr>
											</tbody>
 <tfoot>
        <tr>
            <td colspan="6" style="text-align: right; font-weight: bold;">Total:</td>
            <td id="sale-total" style="text-align: center; font-weight: bold; color:green"></td>
            <td></td>
        </tr>
    </tfoot>
										</table>


										<div id="pagination-controls"></div>
									</div>





								</div>
								
								<!-------------------Pay-in List----------------------  -->
								<div class="card-body">
<div>
										<h4>List Of Pay-In</h4> 
									</div>
								<div class="card-body" style="padding: 1rem;">
									<!-- Search Input -->
									<div
										class="mb-3 d-flex justify-content-between align-items-center">
										<div>
											<input type="text" id="searchInput" placeholder="Search..."
												onkeyup="searchTable()" class="form-control" />
										</div>
									</div>

									<!-- Table for displaying journal entries -->
									<table id="payintable" class="table table-striped">
    <thead>
        <tr>
            <th style="text-align: center;">Receipt No</th>
            <th style="text-align: center;">Vendor Id</th>
            <th style="text-align: center;">Vendor Name</th>
            <th style="text-align: center;">Payment Type</th>
            <th style="text-align: center;">Date</th>
            <th style="text-align: center;">Received Amount</th>
            <th style="text-align: center;">Action</th>
        </tr>
    </thead>
    <tbody id="payintablebody">
        <tr th:if="${#lists.isEmpty(getitemlist)}">
            <td colspan="7" style="text-align: center; color: red;">No records found.</td>
        </tr>
        <tr th:each="list : ${getitemlist}">
            <td th:text="${list.receiptNo}" style="text-align: center;"></td>
            <td th:text="${list.vendorId}" style="text-align: center;"></td>
            <td th:text="${list.vendorName}" style="text-align: center;"></td>
            <td th:text="${list.paymentType}" style="text-align: center;"></td>
            <td th:text="${#dates.format(list.date, 'dd/MM/yyyy')}" style="text-align: center;"></td>
            <td th:text="${list.receivedamount}" style="text-align: center;"></td>
            <td style="text-align: center;">
                <input type="radio" name="PIradio" id="PIradio" th:attr="data-wid=${list.receiptNo}" onclick="payinview(this)" />
            </td>
        </tr>
    </tbody>
    <tfoot>
        <tr>
            <td colspan="5" style="text-align: right; font-weight: bold;">Total:</td>
            <td id="payin-total" style="text-align: center; font-weight: bold;color:red"></td>
            <td></td>
        </tr>
    </tfoot>
</table>


									<div id="pagination-controls"></div>
								</div>





							</div>
								
							<!--------------------------Pay-Out List  -->	
								<div class="card-body">
<div>
										<h4>List Of Pay-Out</h4> 
									</div>
								<div class="card-body" style="padding: 1rem;">
									<!-- Search Input -->
									<div
										class="mb-3 d-flex justify-content-between align-items-center">
										<div>
											<input type="text" id="searchInput" placeholder="Search..."
												onkeyup="searchTable()" class="form-control" />
										</div>
									</div>

									<!-- Table for displaying journal entries -->
									<table id="payouttable" class="table table-striped">
											<thead>
												<tr>
													<th style="text-align: center;">Receipt No</th>
													<th style="text-align: center;">Vendor Id</th>
													<th style="text-align: center;">Vendor Name</th>
													<th style="text-align: center;">Payment Type</th>
													<th style="text-align: center;">Date</th>
													<th style="text-align: center;">Sent Amount</th>
													<th style="text-align: center;">Action</th>
												</tr>
											</thead>
											<tbody id="payouttablebody">
												<tr th:if="${#lists.isEmpty(getPayout)}">
													<td colspan="8" style="text-align: center; color: red;">
														No records found.</td>
												</tr>
												<tr th:each="list : ${getPayout}">
													<td th:text="${list.receiptNo}" style="text-align: center;"></td>
													<td th:text="${list.vendorId}"style="text-align: center;"></td>
													<td th:text="${list.vendorName}" style="text-align: center;"></td>
													<td th:text="${list.paymentType}" style="text-align: center;"></td>
													<td style="text-align: center;"th:text="${#dates.format(list.date,'dd/MM/yyyy')}"></td>
													<td th:text="${list.receivedamount}" style="text-align: center;"></td>
													<td style="text-align: center;"><input type="radio"
														th:attr="data-Opid=${list.receiptNo}"
														onclick="payoutview(this)"></td>
												</tr>
											</tbody>
											 <tfoot>
        <tr>
            <td colspan="5" style="text-align: right; font-weight: bold;">Total:</td>
            <td id="payout-total" style="text-align: center; font-weight: bold;color:green"></td>
            <td></td>
        </tr>
    </tfoot>
										</table>

									<div id="pagination-controls"></div>
								</div>





								<!-- Form Footer -->
								<div class="card-footer text-center"
									style="font-family: 'Nunito', sans-serif; font-size: 23px; font-weight: 600;">
									<button class="btn btn-xs btn-dark" type="button"
										id="Dashboard" onclick="Home()">Home</button>


									<button class="btn btn-xs btn-dark" id="btnback"
										onclick="back(event)">Back</button>
								</div>
							</div>
								
							</div>
						</form>
					</div>
				</div>

				<!-- ----------------------------  PO view start------------------ -->
				<div class="container-fluid content"
					th:if="${formmode=='POview'}">

					<div class="row">
						<!-- add-->
						<form action="#" method="post" class="w-100"
							id="VendorRegistrationadd" autocomplete="off">

							<!-- Form Header -->
							<div
								class="card-header d-flex justify-content-between align-items-center"
								style="font-family: 'Nunito', sans-serif; font-size: 1.5rem; font-weight: bold; color: black;">
								<div>
									<i class="fas fa-shopping-cart"></i> Purchase - view
								</div>
								<div>
									<!-- <button class="btn btn-light btn-sm"
										style="color: black; font-weight: bold; border-color: black;"
										onclick="POlist(event);">
										<i class="fas fa-list mr-1"></i> List
									</button> -->
								</div>
							</div>





							<!-- Form Body -->
							<div class="card-body">

								<div class="form-row mb-2">
									<!-- Vendor Selection on the Left -->
									<div class="form-group col-md-2">
										<div class="form-floating">
											<input type="text" class="form-control" name="vendorId"
												th:value="${getpo[0].vendorId}" id="vendorId" list="wolist"
												onchange="readMakelistOptions()">
											<datalist id="wolist">
												<!-- Dynamic Vendor Options -->
												<option th:each="woList : ${getvendor}"
													th:value="${woList.vendorId +'-'+ woList.vendorName}"
													th:text="${woList.vendorId +'-'+ woList.vendorName}"></option>
											</datalist>
											<label for="woid" class="form-legend">Vendor</label>
										</div>
									</div>
									<div class="form-group col-md-8"></div>

									<!-- Order No. on the Right -->
									<div class="form-group col-md-2">
										<div class="form-floating">
											<input type="hidden" th:value="${getpo[0].poId}" name="poId"
												id="poId"> <input type="text" class="form-control"
												th:value="${getpo[0].orderNo}" name="orderNo" id="orderNo"
												placeholder="Order No."> <label for="orderNo"
												class="form-legend">Order No.</label>
										</div>
									</div>
								</div>



								<div class="form-row mb-2">

									<div class="form-group col-md-10"></div>
									<!-- Order Date -->
									<div class="form-group col-md-2">
										<div class="form-floating">
											<input type="text" class="form-control" name="orderDate"
												id="orderDate"
												th:value="${getpo[0].orderDate != null ? #dates.format(getpo[0].orderDate, 'dd-MM-yyyy') : ''}">
											<label for="orderDate" class="form-legend">Order Date</label>
										</div>
									</div>
								</div>

								<div class="form-row mb-2">
									<div class="form-group col-md-10"></div>
									<!-- Due Date -->
									<div class="form-group col-md-2">
										<div class="form-floating">
											<input type="text" class="form-control" name="dueDate"
												id="dueDate"
												th:value="${getpo[0].dueDate != null ? #dates.format(getpo[0].dueDate, 'dd-MM-yyyy') : ''}">
											<label for="dueDate" class="form-legend">Due Date</label>
										</div>
									</div>
								</div>



								<!-- Table -->
								<table class="table table-bordered table-striped text-center"
									id="itemTable">
									<thead style="background-color: #F5F5F5;">
										<tr>
											<th style="width: 6%;">Srl No.</th>
											<th>CODE</th>
											<th>ITEM</th>
											<th>HSN CODE</th>
											<th>QTY</th>
											<th style="width: 18%;">UNIT</th>
											<th>PRICE/UNIT</th>
											<th colspan="2">TAX</th>
											<th style="width: 12.5%;">AMOUNT</th>
											<th>ACTION</th>
										</tr>
										<tr>
											<th colspan="5"></th>
											<th><select class="form-control form-control-sm mt-1"
												id="priceHeader" name="priceHeader"
												style="background-color: #F5F5F5 !important;">
													<option value="">Select</option>
													<option value="Withtax"
														th:selected="${getpo[0].priceHeader}=='Withtax'">With
														Tax</option>
													<option value="withouttax"
														th:selected="${getpo[0].priceHeader}=='withouttax'">Without
														Tax</option>
											</select></th>
											<th style="width: 12%;">%</th>
											<th>AMOUNT</th>
											<th colspan="1"></th>
											<th></th>
											<th></th>
										</tr>
									</thead>

									<tbody>
										<tr th:each="lis,srl:${getpo}">
											<td th:text="${srl.index + 1}">1</td>
											<td><input type="text" class="form-control"
												id="itemcode" th:value="${lis.itemcode}" name="itemcode"
												list="itemList" onchange="product_name_typeFunction1(this)">
												<datalist id="itemList">
													<option th:each="itemList : ${ItemList}"
														th:value="${itemList.itemCode}"
														th:text="${itemList.itemCode}"></option>
												</datalist></td>
											<td><input type="text" class="form-control" name="item"
												th:value="${lis.item}" id="item" placeholder="Item">
												<input type="hidden" class="form-control" name="originalid"
												th:value="${lis.id}" id="originalid"></td>

											<td><input type="text" class="form-control"
												name="HSN_code" th:value="${lis.hsncode}" id="hsncode"
												placeholder="HSN_code"></td>

											<td><input type="number" class="form-control" name="qty"
												id="qty" th:value="${lis.qty}" placeholder=" Qty"></td>
											<td><select class="form-control" name="unit" id="unit">
													<option th:value="${lis.unit}" th:text="${lis.unit}">NONE</option>
													<option value="BAGS">BAGS</option>
													<option value="BOTTLES_BTL">BOTTLES (BTL)</option>
													<option value="BOX">BOX</option>
													<option value="BUNDLES_BDL">BUNDLES (BDL)</option>
													<option value="CANS">CANS (CAN)</option>
													<option value="CARTONS">CARTONS (CTN)</option>
													<option value="DOZENS">DOZENS (DZN)</option>
													<option value="GRAMMES">GRAMMES (GM)</option>
													<option value="KILOGRAMS">KILOGRAMS (KG)</option>
													<option value="LITRES">LITRES (LTR)</option>
													<option value="METERS">METERS (MTR)</option>
													<option value="MILILITRE">MILILITRE (ML)</option>
													<option value="NUMBERS">NUMBERS (NOS)</option>
													<option value="PACKS">PACKS (PAC)</option>
													<option value="PAIRS">PAIRS (PRS)</option>
													<option value="PIECES">PIECES (PCS)</option>
													<option value="QUINTAL">QUINTAL (QTL)</option>
													<option value="ROLLS">ROLLS (ROL)</option>
													<option value="SQUARE_FEET">SQUARE FEET (SQF)</option>
													<option value="SQUARE_METERS">SQUARE METERS (SQM)</option>
													<option value="TABLETS">TABLETS (TBS)</option>
											</select></td>
											<td><input type="number" class="form-control"
												name="price" th:value="${lis.price}" id="price"
												placeholder="Price" oninput="calculateTax(this)"></td>
											<td><select class="form-control form-control-sm mt-1"
												id="taxPercentage" name="taxPercentage"
												onchange="calculateTax(this)">
													<option th:value="${lis.taxPercentage}"
														th:text="${lis.taxPercentage}">NONE</option>
													<option value="IGST@0%">IGST@0%</option>
													<option value="CGST@0%">CGST@0%</option>
													<option value="SGST@0%">SGST@0%</option>
													<option value="IGST@0.25%">IGST@0.25%</option>
													<option value="CGST@0.25%">CGST@0.25%</option>
													<option value="SGST@0.25%">SGST@0.25%</option>
													<option value="IGST@3%">IGST@3%</option>
													<option value="CGST@3%">CGST@3%</option>
													<option value="SGST@3%">SGST@3%</option>
													<option value="IGST@5%">IGST@5%</option>
													<option value="CGST@5%">CGST@5%</option>
													<option value="SGST@5%">SGST@5%</option>
													<option value="IGST@12%">IGST@12%</option>
													<option value="CGST@12%">CGST@12%</option>
													<option value="SGST@12%">SGST@12%</option>
													<option value="IGST@18%">IGST@18%</option>
													<option value="CGST@18%">CGST@18%</option>
													<option value="SGST@18%">SGST@18%</option>
													<option value="IGST@28%">IGST@28%</option>
													<option value="CGST@28%">CGST@28%</option>
													<option value="SGST@28%">SGST@28%</option>
													<option value="EXEMPT">EXEMPT</option>
											</select></td>
											<td><input type="number" class="form-control"
												th:value="${lis.taxAmount}" name="taxAmount" id="taxAmount"
												placeholder="Tax Amount" readonly></td>
											<td><input type="number" class="form-control"
												name="amountPerItem" th:value="${lis.amountPerItem}"
												id="amountPerItem" placeholder="Amount"></td>
											<td>
												<button class="btn btn-danger btn-sm remove-row">-</button>
											</td>
										</tr>
									</tbody>

									<tfoot>
										<tr>
											<th colspan="4" class="text-right">TOTAL</th>
											<th id="qtyTotalCell" style="font-weight: bold;"><input
												type="number" class="form-control" name="totalQty"
												id="totalQty" th:value="${getpo[0].totalQty}"
												placeholder=" Qty" readonly></th>
											<th colspan="4" class="text-right"></th>
											<th colspan="1"><input type="number"
												class="form-control" name="totalAmount" id="totalAmount"
												th:value="${getpo[0].totalAmount}" placeholder=" Total"
												readonly></th>
										</tr>
									</tfoot>

								</table>

								<!-- Add Row Button -->
								<button class="btn btn-primary" id="addRowBtn">+</button>
								<div></div>
								<br>
								<!-- Payment Section -->
								<div class="row align-items-start">
									<!-- Payment Type Dropdown -->
									<div class="col-md-3">
										<label for="paymentType"><strong>Payment Type</strong></label>
										<select class="form-control" id="paymentType"
											name="paymentType">
											<option value="" selected disabled>-- Select Payment
												Type --</option>
											<option value="cash"
												th:selected="${getpo[0].paymentType}=='cash'">Cash</option>
											<option value="cheque"
												th:selected="${getpo[0].paymentType}=='cheque'">Cheque</option>
										</select>
										<div id="chequeField" style="display: none; margin-top: 10px;">
											<label for="referenceNumber"><strong>Reference
													Number</strong></label> <input type="text" class="form-control"
												id="referenceNumber" th:value="${getpo[0].referenceNumber}"
												name="referenceNumber" placeholder=" Reference Number">
										</div>
									</div>

									<!-- Amount and Reference Number (Dynamic Fields) -->
									<div class="col-md-2" id="dynamicFields">
										<div id="cashField" style="display: none;">
											<label for="amount"><strong>Amount</strong></label> <input
												type="number" class="form-control" id="paidAmount"
												th:value="${getpo[0].paidAmount}" name="paidAmount"
												placeholder="Enter Amount">
										</div>

									</div>

									<!-- Total, Advance, and Balance Fields -->
									<div class="col-md-3 offset-md-4">
										<div class="form-group">
											<label for="total"><strong>Total</strong></label> <input
												type="number" class="form-control" name="totalAmounts"
												th:value="${getpo[0].totalAmount}" id="totalAmounts"
												placeholder="Total" readonly>
										</div>
										<div class="form-group mt-2">
											<label for="advanceAmount"><strong>Advance
													Amount</strong></label> <input type="number" class="form-control"
												id="advanceAmount" name="advanceAmount"
												th:value="${getpo[0].advanceAmount}"
												placeholder="Enter Advance Amount">
										</div>
										<div class="form-group mt-2">
											<label for="balance"><strong>Balance</strong></label> <input
												type="number" class="form-control" id="balanceAmount"
												name="balanceAmount" th:value="${getpo[0].balanceAmount}"
												placeholder="Balance" readonly>
										</div>
									</div>
								</div>


								<br>

								<div class="card-footer text-center"
									style="font-family: 'Nunito', sans-serif; font-size: 23px; font-weight: 600;">
									<button class="btn btn-xs btn-dark" type="button"
										id="Dashboard" onclick="Home()">Home</button>
									<button type="button" class="btn btn-xs btn-dark"
										th:if="${formmode=='modify'}" id="btnSubmit"
										onclick="invoice_edit(this.getAttribute('value'));"
										th:value="${POID}" style="width: 120px">Submit</button>



									<button class="btn btn-xs btn-dark" id="btnback"
										onclick="back(event)">Back</button>
								</div>


							</div>
						</form>
					</div>
				</div>


<!-------------------------------------sale view-------------------------------->


<div class="container-fluid content"
					th:if="${formmode=='Saleview'}">

					<div class="row">
						<!-- add-->
						<form action="#" method="post" class="w-100"
							id="VendorRegistrationadd" autocomplete="off">

							<!-- Form Header -->
							<div
								class="card-header d-flex justify-content-between align-items-center"
								style="font-family: 'Nunito', sans-serif; font-size: 1.5rem; font-weight: bold; color: black;">
								<div>
									<i class="fas fa-box-open"></i> Sale Order
								</div>
								<div>
									<button class="btn btn-light btn-sm"
										style="color: black; font-weight: bold; border-color: black;"
										onclick="registrationlist(event);">
										<i class="fas fa-list mr-1"></i> List
									</button>
								</div>
							</div>





							<!-- Form Body -->
							<div class="card-body">

								<div class="form-row mb-2">
									<!-- Vendor Selection on the Left -->
									<div class="form-group col-md-2">
										<div class="form-floating">
											<input type="text" class="form-control" name="vendorId" th:value="${getlist[0].vendorId}"
												id="vendorId" list="wolist" onchange="readMakelistOptions()">
											<datalist id="wolist">
												<!-- Dynamic Vendor Options -->
												<option th:each="woList : ${getvendor}"
													th:value="${woList.vendorId +'('+ woList.vendorName+')'}" th:text="${woList.vendorId +'('+ woList.vendorName+')'}"></option>
											</datalist>
											<label for="woid" class="form-legend">Vendor</label>
										</div>
									</div>
									<div class="form-group col-md-2">
										<div class="form-floating">
											<input type="text" class="form-control" name="PHONE_NO" th:value="${getlist[0].PHONE_NO}"
												id="PHONE_NO" placeholder="Phone No."> 
												<input type="hidden" class="form-control" name="woId" th:value="${getlist[0].woId}"
												id="woId" placeholder="Phone No."> 
												<label
												for="orderNo" class="form-legend">Phone No.</label>
										</div>
									</div>

									<div class="form-group col-md-6"></div>

									<!-- Order No. on the Right -->
									<div class="form-group col-md-2">
										<div class="form-floating">
											<input type="text" class="form-control" th:value="${getlist[0].orderNo}"  name="orderNo"
												id="orderNo" placeholder="Order No." > <label
												for="orderNo" class="form-legend">Order No.</label>
										</div>
									</div>
								</div>



								<div class="form-row mb-2">

									<div class="form-group col-md-10"></div>
									<!-- Order Date -->
									<div class="form-group col-md-2">
										<div class="form-floating">
											<input type="text" class="form-control" name="orderDate"th:value="${#dates.format(getlist[0].orderDate, 'dd-MM-yyyy')}"
												id="orderDate" > <label
												for="orderDate" class="form-legend">Order Date</label>
										</div>
									</div>
								</div>

								<div class="form-row mb-2">


									<div class="form-group col-md-2">



									</div>


									<div class="form-group col-md-8"></div>
									<!-- Due Date -->
									<div class="form-group col-md-2">
										<div class="form-floating">
											<input type="date" class="form-control" name="dueDate" th:value="${#dates.format(getlist[0].dueDate, 'yyyy-MM-dd')}"
												id="dueDate"> <label for="dueDate"
												class="form-legend">Due Date</label>
										</div>
									</div>
								</div>
								
								
								

								
							<table class="table table-bordered table-striped text-center"
								id="address">
								<thead style="background-color: #F5F5F5;">
									<tr>
										<th style="width: 9%;text-align:left;">Type</th>
										<th style="width: 12%;">Company Name</th>
										<th style="width: 10%;">Address</th>
										<th style="width: 10%;">Street</th>
										<th style="width: 10%;">District</th>
										<th style="width: 10%;">Pin Code</th>
										<th style="width: 10%;">Tel No</th>
										<th style="width: 10%;">Email</th>
										<th style="width: 10%;">Gst No</th>
										
										
									</tr>
									
								</thead>
								<tbody>
									<tr>
										<th style=" text-align:left">Billed To</th>
										<td><input type="text" id="bill_companyname" name="bill_companyname" th:value="${getlist[0].bill_companyname}" class="form-control" /></td>
										<td><input type="text" id="bill_address" name="bill_address" th:value="${getlist[0].bill_address}" class="form-control" /></td>
										<td><input type="text" id="bill_street" name="bill_street" th:value="${getlist[0].bill_street}"class="form-control" /></td>
										<td><input type="text" id="bill_dis" name="bill_dis" th:value="${getlist[0].bill_street}"class="form-control" /></td>
										<td><input type="text" id="bill_pincode" name="bill_pincode" th:value="${getlist[0].bill_pincode}" class="form-control" /></td>
										<td><input type="text" id="bill_phno" name="bill_phno" th:value="${getlist[0].bill_phno}" class="form-control" /></td>
										<td><input type="text" id="bill_email" name="bill_email" th:value="${getlist[0].bill_email}" class="form-control" /></td>
										<td><input type="text" id="bill_gstno" name="bill_gstno" th:value="${getlist[0].bill_gstno}" class="form-control" /></td>		
										
										
										
									</tr>
									
								<tr>
										<th style=" text-align:left;background-color: #F5F5F5;">Shipped To</th>
										<td><input type="text" id="ship_companyname" th:value="${getlist[0].ship_companyname}" name="ship_companyname" class="form-control" /></td>
										<td><input type="text" id="ship_address"name="ship_address"th:value="${getlist[0].ship_address}"  class="form-control" /></td>
										<td><input type="text" id="ship_street"name="ship_street" th:value="${getlist[0].ship_street}" class="form-control" /></td>
										<td><input type="text" id="ship_dis"name="ship_dis" th:value="${getlist[0].ship_dis}" class="form-control" /></td>
										<td><input type="text" id="ship_pincode"name="ship_pincode" th:value="${getlist[0].ship_pincode}" class="form-control" /></td>
										<td><input type="text" id="ship_phno"name="ship_phno" th:value="${getlist[0].ship_phno}" class="form-control" /></td>
										<td><input type="text" id="ship_email"name="ship_email" th:value="${getlist[0].ship_email}" class="form-control" /></td>
										<td><input type="text" id="ship_gstno"name="ship_gstno" th:value="${getlist[0].ship_gstno}" class="form-control" /></td>	
										
										
										
									</tr>
									
									
								</tbody>
							

							</table>




							<!-- Table -->
							<table class="table table-bordered table-striped text-center"
								id="itemTable">
								<thead style="background-color: #F5F5F5;">
									<tr>
										<th style="width: 6%;">Srl No.</th>
										<th>CODE</th>
										<th>ITEM</th>
										<th>HSN CODE</th>
										<th>QTY</th>
										<th style="width: 18%;">UNIT</th>
										<th>PRICE/UNIT</th>
										<th colspan="2">TAX</th>
										<th style="width: 12.5%;">AMOUNT</th>
										<th>ACTION</th>
									</tr>
									<tr >
										<th colspan="5"></th>
										<th><select class="form-control form-control-sm mt-1"
											id="priceHeader" name="priceHeader"
											style="background-color: #F5F5F5 !important;">
												<option value="With_Tax">With Tax</option>
												<option value="With_Out_Tax">Without Tax</option>
										</select></th>
										<th style="width: 12%;">%</th>
										<th>AMOUNT</th>
										<th colspan="1"></th>
										<th colspan="1"></th>
										<th></th>
									</tr>
									
									
								</thead>
								<tbody>
									<tr th:each="list,itr :${getlist}">
										<td th:text="${itr.index+1}">1</td>
										<td><input type="text" class="form-control" th:value="${list.itemcode}" id="itemcode"
											name="itemcode" placeholder="Code" list="itemList"
											onchange="product_name_typeFunction1(this)"> <datalist
												id="itemList">
												<option th:each="itemList : ${ItemList}"
													th:value="${itemList.itemCode}"
													th:text="${itemList.itemCode}"></option>
											</datalist></td>
										<td><input type="text" class="form-control" name="item"  th:value="${list.item}"
											id="item" placeholder="Item">
											<input type="hidden" class="form-control" name="id"  th:value="${list.id}"
											id="id" >
											</td>
										<td><input type="text" class="form-control" name="HSN_code"  th:value="${list.hsncode}" id="hsncode" placeholder="HSN_code" ></td>
										
										
										<td><input type="number" class="form-control" name="qty" th:value="${list.qty}" oninput="updateAmount(this)"
											id="qty" placeholder=" Qty"></td>
										<td><select class="form-control" name="unit" id="unit">
												<option th:value="${list.unit}" th:text="${list.unit}">NONE</option>
												<option value="BAGS">BAGS</option>
												<option value="BOTTLES_BTL">BOTTLES (BTL)</option>
												<option value="BOX">BOX</option>
												<option value="BUNDLES_BDL">BUNDLES (BDL)</option>
												<option value="CANS">CANS (CAN)</option>
												<option value="CARTONS">CARTONS (CTN)</option>
												<option value="DOZENS">DOZENS (DZN)</option>
												<option value="GRAMMES">GRAMMES (GM)</option>
												<option value="KILOGRAMS">KILOGRAMS (KG)</option>
												<option value="LITRES">LITRES (LTR)</option>
												<option value="METERS">METERS (MTR)</option>
												<option value="MILILITRE">MILILITRE (ML)</option>
												<option value="NUMBERS">NUMBERS (NOS)</option>
												<option value="PACKS">PACKS (PAC)</option>
												<option value="PAIRS">PAIRS (PRS)</option>
												<option value="PIECES">PIECES (PCS)</option>
												<option value="QUINTAL">QUINTAL (QTL)</option>
												<option value="ROLLS">ROLLS (ROL)</option>
												<option value="SQUARE_FEET">SQUARE FEET (SQF)</option>
												<option value="SQUARE_METERS">SQUARE METERS (SQM)</option>
												<option value="TABLETS">TABLETS (TBS)</option>
										</select></td>
										<td><input type="number" class="form-control"
											name="price" id="price" placeholder="Price" th:value="${list.price}"
											oninput="calculateTax(this)"></td>
										<td><select class="form-control form-control-sm mt-1"
											id="taxPercentage" name="taxPercentage"
											onchange="calculateTax(this)">
												<option th:value="${list.taxPercentage}" th:text="${list.taxPercentage}" >NONE</option>
												<option value="IGST@0%">IGST@0%</option>
												<option value="CGST@0%">CGST@0%</option>
												<option value="SGST@0%">SGST@0%</option>
												<option value="IGST@0.25%">IGST@0.25%</option>
												<option value="CGST@0.25%">CGST@0.25%</option>
												<option value="SGST@0.25%">SGST@0.25%</option>
												<option value="IGST@3%">IGST@3%</option>
												<option value="CGST@3%">CGST@3%</option>
												<option value="SGST@3%">SGST@3%</option>
												<option value="IGST@5%">IGST@5%</option>
												<option value="CGST@5%">CGST@5%</option>
												<option value="SGST@5%">SGST@5%</option>
												<option value="IGST@12%">IGST@12%</option>
												<option value="CGST@12%">CGST@12%</option>
												<option value="SGST@12%">SGST@12%</option>
												<option value="IGST@18%">IGST@18%</option>
												<option value="CGST@18%">CGST@18%</option>
												<option value="SGST@18%">SGST@18%</option>
												<option value="IGST@28%">IGST@28%</option>
												<option value="CGST@28%">CGST@28%</option>
												<option value="SGST@28%">SGST@28%</option>
												<option value="EXEMPT">EXEMPT</option>
										</select></td>
										<td><input type="number" class="form-control" th:value="${list.taxAmount}"
											name="taxAmount" id="taxAmount" placeholder="Tax Amount"
											readonly></td>
										<td><input type="number" class="form-control" th:value="${list.amountPerItem}"
											name="amountPerItem" id="amountPerItem" placeholder="Amount">
										</td>
										<td>
											<button class="btn btn-danger btn-sm remove-row">-</button>
										</td>
									</tr>
								</tbody>
								<tfoot>
									<tr>
										<th colspan="3" class="text-right">TOTAL</th>
										<th id="qtyTotalCell" style="font-weight: bold;"><input
											type="number" class="form-control" name="totalQty" th:value="${getlist[0].totalQty}"
											id="totalQty" placeholder=" Qty" readonly></th>
										<th colspan="4" class="text-right"></th>
										<th colspan="1"><input type="number" class="form-control"
											name="totalAmount" id="totalAmount"  th:value="${getlist[0].totalAmount}" placeholder=" Total"
											readonly></th>
									</tr>
								</tfoot>

							</table>

							<!-- Add Row Button -->
							<button class="btn btn-primary" id="addRowBtn">+</button>
							<div></div>
							<br>
							<!-- Payment Section -->
							<div class="row align-items-start">
								<!-- Payment Type Dropdown -->
								<div class="col-md-3">
									<label for="paymentType"><strong>Payment Type</strong></label>
									<select class="form-control" id="paymentType"
										name="paymentType">
										<option value="" selected disabled>-- Select Payment
											Type --</option>
										<option value="cash" th:selected="${getlist[0].paymentType}=='cash'">Cash</option>
                						<option value="cheque" th:selected="${getlist[0].paymentType}=='cheque'">Cheque</option>
									</select>
									<div id="chequeField" style="display: none; margin-top: 10px;">
										<label for="referenceNumber"><strong>Reference
												Number</strong></label> <input type="text" th:value="${getlist[0].referenceNumber}" class="form-control"
											id="referenceNumber" name="referenceNumber"
											placeholder=" Reference Number">
									</div>
								</div>

								<!-- Amount and Reference Number (Dynamic Fields) -->
								<div class="col-md-2" id="dynamicFields">
									<div id="cashField" >
										<label for="amount"><strong>Amount</strong></label> <input
											type="number" class="form-control" id="paidAmount" th:value="${getlist[0].paidAmount}"
											name="paidAmount" placeholder="Enter Amount">
									</div>

								</div>

								<!-- Total, Advance, and Balance Fields -->
								<div class="col-md-3 offset-md-4">
									<div class="form-group">
										<label for="total"><strong>Total</strong></label> <input
											type="number" class="form-control" th:value="${getlist[0].totalAmount}" name="totalAmounts"
											id="totalAmounts" placeholder="Total" readonly>
									</div>
									<div class="form-group mt-2">
										<label for="advanceAmount"><strong>Advance
												Amount</strong></label> <input type="number" th:value="${getlist[0].advanceAmount}" class="form-control"
											id="advanceAmount" name="advanceAmount"
											placeholder="Enter Advance Amount">
									</div>
									<div class="form-group mt-2">
										<label for="balance"><strong>Balance</strong></label> <input
											type="number" class="form-control" id="balanceAmount" th:value="${getlist[0].balanceAmount}"
											name="balanceAmount" placeholder="Balance" readonly>
									</div>
								</div>
							</div>


							<br>

							<div class="card-footer text-center"
								style="font-family: 'Nunito', sans-serif; font-size: 23px; font-weight: 600;">
								<button class="btn btn-xs btn-dark" type="button" id="Dashboard"
									onclick="Home()">Home</button>
								<button type="button" class="btn btn-xs btn-dark" id="btnSubmit"
									onclick="saleordermodify(event);" th:if="${formmode =='view'}" style="width: 120px">Submit</button>

								<button class="btn btn-xs btn-dark" id="btnback"
									onclick="back(event)">Back</button>
							</div>
					</div>
					</form>
				</div>
			</div>
			
<!-------------------------------------pay out view-------------------------------->

<div class="container-fluid content" th:if="${formmode}=='payoutview'">
					<div class="row">
						<!-- add-->
						<form action="#" method="post" class="w-100" id="paymentinadd"
							autocomplete="off">

							<div class="card">
								<!-- Form Header -->
								<div
									class="card-header d-flex justify-content-between align-items-center"
									style="font-family: 'Nunito', sans-serif; font-size: 1.5rem; font-weight: bold; color: black;">
									<div>
										<i class="fas fa-user-plus mr-2"></i> Payment-Out
									</div>
									<div>
										<button class="btn btn-light btn-sm"
											style="color: black; font-weight: bold; border-color: black;"
											onclick="registrationlist(event);">
											<i class="fas fa-list mr-1"></i> List
										</button>
									</div>
								</div>

								<!-- Form Body -->
								<div class="card-body">

									<div class="form-row mb-2">
										<!-- Name Field -->
										<div class="form-group col-md-4">
											<input type="text" id="receiptNo" class="form-control"
       th:value="${list.receiptNo}" name="receiptNo"
       readonly required>
<label for="name" class="form-legend">Receipt No</label>

										</div>

										<!-- Phone Number Field -->
										<div class="form-group col-md-4">
											<div class="form-floating">
												<input type="text" class="form-control" onchange="b()"
												 th:value="${list.vendorId}" 	name="vendorId" id="vendorId" list="wolist" readonly>
												<datalist id="wolist">
													<!-- Dynamic Vendor Options -->
													<option th:each="woList : ${getvendor}"
														th:value="${woList.vendorId +'('+ woList.vendorName+')'}"
														th:text="${woList.vendorId +'('+ woList.vendorName+')'}"></option>
												</datalist>
												<label for="name" class="form-legend">Vendor Id</label>
											</div>
										</div>

										<div class="form-group col-md-4">
											<div class="form-floating">
												<input type="text" class="form-control" id="advance"
											th:value="${list.advance}" 		name="advance" placeholder="" readonly > <label
													for="name" class="form-legend">Pending</label>
											</div>
										</div>




									</div>
									<div class="form-row g-3">

										<div class="form-group col-md-4">
											<div class="form-floating">
												<select class="form-control" id="PaymentType"
												name="paymentType" onchange="paymenttypechange()" readonly>
													
    <option value="Cash" th:selected="${list.paymentType == 'Cash'}">Cash</option>
    <option value="Cheque" th:selected="${list.paymentType == 'Cheque'}">Cheque</option>
												</select> <label for="vendorType" class="form-legend">payment
													type</label>
											</div>
										</div>


										<div class="form-group col-md-4" id="ReferenceNo"
											>
											<div class="form-floating">
												<input type="text" class="form-control" id="reference"
											th:value="${list.reference}"	name="reference" placeholder="" readonly> <label
													for="name" class="form-legend">Reference No</label>
											</div>
										</div>

										<div class="form-group col-md-4">
											<div class="form-floating">
												<input type="date" class="form-control" id="date"
										th:value="${#dates.format(list.date, 'yyyy-MM-dd')}" 	name="date" placeholder="" readonly> 
										<label for="name" class="form-legend">date</label>
											</div>
										</div>


										<div class="form-group col-md-4">
											<div class="form-floating">
												<input type="number" class="form-control" id="Received"
											th:value="${list.receivedamount}"			name="receivedamount" placeholder="" readonly> <label
													for="name" class="form-legend">Sent</label>
											</div>
										</div>


									</div>


								</div>

								<div class="card-footer text-center"
									style="font-family: 'Nunito', sans-serif; font-size: 23px; font-weight: 600;">
									<button class="btn btn-xs btn-dark" type="button"
										id="Dashboard" onclick="Home()">Home</button>
									<!-- <button type="button" class="btn btn-xs btn-dark"
										id="btnSubmit" onclick="addpaymentin();" style="width: 120px">Submit</button>
 -->
									<button class="btn btn-xs btn-dark" id="btnback"
										onclick="back(event)">Back</button>
								</div>


							</div>
						</form>
					</div>
				</div>
<!-------------------------------------pay in view-------------------------------->


<div class="container-fluid content" th:if="${formmode}=='payinview'">
					<div class="row">
						<!-- add-->
						<form action="#" method="post" class="w-100" id="paymentinadd"
							autocomplete="off">

							<div class="card">
								<!-- Form Header -->
								<div
									class="card-header d-flex justify-content-between align-items-center"
									style="font-family: 'Nunito', sans-serif; font-size: 1.5rem; font-weight: bold; color: black;">
									<div>
										<i class="fas fa-user-plus mr-2"></i> Payment-In
									</div>
									<div>
										<button class="btn btn-light btn-sm"
											style="color: black; font-weight: bold; border-color: black;"
											onclick="registrationlist(event);">
											<i class="fas fa-list mr-1"></i> List
										</button>
									</div>
								</div>

								<!-- Form Body -->
								<div class="card-body">

									<div class="form-row mb-2">
										<!-- Name Field -->
										<div class="form-group col-md-4">
											<input type="text" id="receiptNo" class="form-control"
       th:value="${list.receiptNo}" name="receiptNo"
       readonly required>
<label for="name" class="form-legend">Receipt No</label>

										</div>

										<!-- Phone Number Field -->
										<div class="form-group col-md-4">
											<div class="form-floating">
												<input type="text" class="form-control" onchange="b()"
												 th:value="${list.vendorId}" 	name="vendorId" id="vendorId" list="wolist" readonly>
												<datalist id="wolist">
													<!-- Dynamic Vendor Options -->
													<option th:each="woList : ${getvendor}"
														th:value="${woList.vendorId +'('+ woList.vendorName+')'}"
														th:text="${woList.vendorId +'('+ woList.vendorName+')'}"></option>
												</datalist>
												<label for="name" class="form-legend">Vendor Id</label>
											</div>
										</div>

										<div class="form-group col-md-4">
											<div class="form-floating">
												<input type="text" class="form-control" id="advance"
											th:value="${list.advance}" 		name="advance" placeholder="" readonly > <label
													for="name" class="form-legend">Pending</label>
											</div>
										</div>




									</div>
									<div class="form-row g-3">

										<div class="form-group col-md-4">
											<div class="form-floating">
												<select class="form-control" id="PaymentType"
												name="paymentType" onchange="paymenttypechange()" readonly>
													
    <option value="Cash" th:selected="${list.paymentType == 'Cash'}">Cash</option>
    <option value="Cheque" th:selected="${list.paymentType == 'Cheque'}">Cheque</option>
												</select> <label for="vendorType" class="form-legend">payment
													type</label>
											</div>
										</div>


										<div class="form-group col-md-4" id="ReferenceNo"
											>
											<div class="form-floating">
												<input type="text" class="form-control" id="reference"
											th:value="${list.reference}"	name="reference" placeholder="" readonly> <label
													for="name" class="form-legend">Reference No</label>
											</div>
										</div>

										<div class="form-group col-md-4">
											<div class="form-floating">
												<input type="date" class="form-control" id="date"
										th:value="${#dates.format(list.date, 'yyyy-MM-dd')}" 	name="date" placeholder="" readonly> 
										<label for="name" class="form-legend">date</label>
											</div>
										</div>


										<div class="form-group col-md-4">
											<div class="form-floating">
												<input type="number" class="form-control" id="Received"
											th:value="${list.receivedamount}"			name="receivedamount" placeholder="" readonly> <label
													for="name" class="form-legend">Sent</label>
											</div>
										</div>


									</div>


								</div>

								<div class="card-footer text-center"
									style="font-family: 'Nunito', sans-serif; font-size: 23px; font-weight: 600;">
									<button class="btn btn-xs btn-dark" type="button"
										id="Dashboard" onclick="Home()">Home</button>
									<!-- <button type="button" class="btn btn-xs btn-dark"
										id="btnSubmit" onclick="addpaymentin();" style="width: 120px">Submit</button>
 -->
									<button class="btn btn-xs btn-dark" id="btnback"
										onclick="back(event)">Back</button>
								</div>


							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>

</body>
</html>